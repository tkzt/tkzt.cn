import{p as rt,a as nt,c as k,d as sr,r as be,o as or,b as ar,e as $,f as V,g as cr,F as Ee,h as vt,w as pt,t as ne,n as mt,i as lr,_ as Ce,j as ur,k as hr,l as K,m as Ue,q as gt,u as dr,s as fr}from"./index.f936735d.js";function vr(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in r)){const s=Object.getOwnPropertyDescriptor(n,i);s&&Object.defineProperty(r,i,s.get?s:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}let pr=(r=21)=>crypto.getRandomValues(new Uint8Array(r)).reduce((e,t)=>(t&=63,t<36?e+=t.toString(36):t<62?e+=(t-26).toString(36).toUpperCase():t>62?e+="-":e+="_",e),"");const mr={class:"rotator-container",height:"16",width:"16"},gr=[(r=>(rt("data-v-6ba80450"),r=r(),nt(),r))(()=>k("circle",{class:"rotator",cx:"8",cy:"8",r:"6","stroke-width":"2",fill:"transparent"},null,-1))];function it(r,e){e===void 0&&(e={});var t=e.insertAt;if(r&&typeof document<"u"){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css",t==="top"&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=r:i.appendChild(document.createTextNode(r))}}it(".rotator-container[data-v-6ba80450]{-webkit-animation:rotate-1-turn-6ba80450 1.4s linear infinite;animation:rotate-1-turn-6ba80450 1.4s linear infinite}.rotator[data-v-6ba80450]{stroke:var(--er-primary-dark);stroke-linecap:round;-webkit-animation:loading-6ba80450 1.4s ease-in-out infinite;animation:loading-6ba80450 1.4s ease-in-out infinite}@-webkit-keyframes loading-6ba80450{0%{stroke-dasharray:1,60}50%{stroke-dasharray:40,60;stroke-dashoffset:-5}to{stroke-dasharray:40,60;stroke-dashoffset:-43}}@keyframes loading-6ba80450{0%{stroke-dasharray:1,60}50%{stroke-dasharray:40,60;stroke-dashoffset:-5}to{stroke-dasharray:40,60;stroke-dashoffset:-43}}@-webkit-keyframes rotate-1-turn-6ba80450{to{transform:rotate(1turn)}}@keyframes rotate-1-turn-6ba80450{to{transform:rotate(1turn)}}");const yr={render:function(r,e){return $(),V("svg",mr,gr)},__scopeId:"data-v-6ba80450",__file:"packages/ProgressCircular.vue"},br=["id"],_r={key:1,viewBox:"0 0 24 24",width:"20",height:"20",fill:"#757575"},wr=[(r=>(rt("data-v-1f6b314a"),r=r(),nt(),r))(()=>k("path",{d:`M20,12A8,8 0 0,0 12,4A8,8 0 0,0 4,12A8,8 0 0,0 12,20A8,8 0 0,
          0 20,12M22,12A10,10 0 0,1 12,22A10,10 0 0,1 2,12A10,10 0 0,1 12,
          2A10,10 0 0,1 22,12M10,9.5C10,10.3 9.3,11 8.5,11C7.7,11 7,10.3 7,
          9.5C7,8.7 7.7,8 8.5,8C9.3,8 10,8.7 10,9.5M17,9.5C17,10.3 16.3,11 15.5,
          11C14.7,11 14,10.3 14,9.5C14,8.7 14.7,8 15.5,8C16.3,8 17,8.7 17,9.5M12,
          17.23C10.25,17.23 8.71,16.5 7.81,15.42L9.23,14C9.68,14.72 10.75,15.23 12,
          15.23C13.25,15.23 14.32,14.72 14.77,14L16.19,15.42C15.29,16.5 13.75,17.23 12,
          17.23Z`},null,-1))],kr={key:2,class:"er-pop-up"},Sr=["onClick"],xr=["onClick"],Tr={class:"er-reactions"},Er=["onClick"],jr={class:"er-reaction-emoji"},Rr={class:"er-reaction-sum"},Or=["onClick"],Ar={class:"er-reaction-sum"};var Xe=sr({__name:"EmojiReaction",props:{emojis:{type:Array,required:!1,default:()=>["\u{1F44D}","\u{1F44E}","\u{1F604}","\u{1F389}","\u{1F615}","\u2764\uFE0F","\u{1F680}","\u{1F440}"]},reactor:{type:String,required:!0,default:""},react:{type:Function,required:!0},unreact:{type:Function,required:!0},getReactions:{type:Function,required:!0}},setup(r){const e=r,t=be([]),n=be([]),i=be(!1),s=be(`er-${pr()}`),o="popup-";function a(h){const p=h/1e3,f=h/1e4;return f>1e3?"999m+":f>1?`${f.toFixed(1).replace(/[.0]*$/g,"")}m`:p>1?`${p.toFixed(1).replace(/[.0]*$/g,"")}k`:`${h}`}function u(h){const p=document.querySelector(`#${s.value}`),f=h.target;if(p&&p.contains(f)){const{classList:v}=f;!["er-pop-up","er-pop-up-item","er-trigger-icon"].some(y=>v.contains(y))&&i.value&&(i.value=!1)}else i.value=!1}async function l(h){if(!t.value.includes(h)){t.value.push(h);const p=h.replace(o,"");await e.react(p),setTimeout(()=>{t.value=t.value.filter(f=>f!==h),i.value&&(i.value=!1),function(f){const v=n.value.find(y=>y.reaction===f);v?v.reactors.push(e.reactor):n.value.push({reaction:f,reactors:[e.reactor]})}(p)},370)}}async function c(h){if(!t.value.includes(h)){const p=h.replace(o,"");await e.unreact(p),function(f){const v=n.value.find(y=>y.reaction===f);v&&(v.reactors=v.reactors.filter(y=>y!==e.reactor),v.reactors.length===0&&(n.value=n.value.filter(y=>y.reaction!==f)))}(p),i.value&&(i.value=!1)}}return or(()=>{(async function(){t.value.push("all"),n.value=(await e.getReactions()).filter(h=>h.reaction&&e.emojis.includes(h.reaction)),t.value=t.value.filter(h=>h!=="all")})(),window.addEventListener("click",u)}),ar(()=>{window.removeEventListener("click",u)}),(h,p)=>($(),V("div",{class:"emoji-reaction",id:s.value},[k("div",{class:"er-trigger-icon",onClick:p[0]||(p[0]=f=>i.value=!i.value)},[t.value.includes("all")?($(),cr(yr,{key:0})):($(),V("svg",_r,wr)),i.value?($(),V("div",kr,[($(!0),V(Ee,null,vt(r.emojis,(f,v)=>{return $(),V(Ee,null,[(y=f,n.value.some(g=>g.reaction===y&&g.reactors.includes(e.reactor))?($(),V("div",{class:"er-pop-up-item reacted",onClick:pt(g=>c(o+f),["stop"]),key:"reacted-"+v},ne(f),9,Sr)):($(),V("div",{class:"er-pop-up-item",onClick:pt(g=>l(o+f),["stop"]),key:v},[k("span",{class:mt(["er-pop-up-item-emoji",{loading:t.value.includes(o+f)}])},ne(f),3)],8,xr)))],64);var y}),256))])):lr("v-if",!0)]),k("div",Tr,[($(!0),V(Ee,null,vt(n.value,({reaction:f,reactors:v},y)=>($(),V(Ee,null,[v.includes(r.reactor)?($(),V("div",{key:"reacted-"+y,class:"er-reaction reacted",onClick:g=>c(f)},[k("span",jr,ne(f),1),k("span",Rr,ne(a(v.length)),1)],8,Er)):($(),V("div",{key:y,class:"er-reaction",onClick:g=>l(f)},[k("span",{class:mt(["er-reaction-emoji",{loading:t.value.includes(f)}])},ne(f),3),k("span",Ar,ne(a(v.length)),1)],8,Or))],64))),256))])],8,br))}});it('.emoji-reaction[data-v-1f6b314a]{align-items:center;display:flex;min-height:28px;position:relative;width:100%}.er-trigger-icon[data-v-1f6b314a]{align-items:center;cursor:pointer;display:flex;height:20px;justify-content:center;position:relative;width:20px}.er-trigger-icon[data-v-1f6b314a]:after{border-radius:50%;content:"";display:inline-block;height:26px;left:-3px;position:absolute;top:-3px;width:26px}.er-trigger-icon[data-v-1f6b314a]:hover:after{background-color:rgba(0,0,0,.06)}.er-reactions[data-v-1f6b314a]{display:flex;flex-wrap:wrap;margin-left:4px}.er-reaction[data-v-1f6b314a]{align-items:center;background-color:rgba(0,0,0,.06);border-radius:12px;cursor:pointer;display:flex;justify-content:center;margin:2px;padding:0 8px 0 4px}.er-reaction[data-v-1f6b314a]:hover{background-color:rgba(0,0,0,.09)}.er-reaction.reacted[data-v-1f6b314a]{background-color:var(--er-primary-light)}.er-reaction.reacted[data-v-1f6b314a]:hover{background-color:var(--er-primary)}.er-reaction-emoji[data-v-1f6b314a]{font-size:16px;height:23px}.er-reaction-sum[data-v-1f6b314a]{color:rgba(0,0,0,.81);font-size:12px;margin-left:2px}.er-pop-up[data-v-1f6b314a]{align-items:center;-webkit-animation:pop-up-1f6b314a .2s ease-out;animation:pop-up-1f6b314a .2s ease-out;background-color:#fff;border-radius:8px;bottom:26px;box-shadow:0 0 10px rgba(0,0,0,.15);box-sizing:border-box;display:flex;left:0;overflow:hidden;padding:4px;position:absolute;z-index:1}.er-pop-up-item[data-v-1f6b314a]{align-items:center;border-radius:50%;box-sizing:border-box;cursor:pointer;display:flex;font-size:16px;height:26px;justify-content:center;width:26px}.er-pop-up-item[data-v-1f6b314a]:hover{background-color:rgba(0,0,0,.06)}.er-pop-up-item.reacted[data-v-1f6b314a]{background-color:var(--er-primary-light)}.er-pop-up-item.reacted[data-v-1f6b314a]:hover{background-color:var(--er-primary)}.er-pop-up-item-emoji.loading[data-v-1f6b314a],.er-reaction-emoji.loading[data-v-1f6b314a]{-webkit-animation:bounce-1f6b314a .8s ease-in;animation:bounce-1f6b314a .8s ease-in}.er-pop-up-item[data-v-1f6b314a],.er-reaction[data-v-1f6b314a]{-webkit-user-select:none;-moz-user-select:none;user-select:none}@-webkit-keyframes pop-up-1f6b314a{0%{bottom:20px;height:0;width:0}to{bottom:26px;height:-webkit-fit-content;height:fit-content;width:-webkit-fit-content;width:fit-content}}@keyframes pop-up-1f6b314a{0%{bottom:20px;height:0;width:0}to{bottom:26px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}}@-webkit-keyframes bounce-1f6b314a{50%{transform:scale(1.2)}60%{transform:scale(1.3)}70%{transform:scale(.9)}80%{transform:scale(1.2)}0%,to{transform:scale(1)}}@keyframes bounce-1f6b314a{50%{transform:scale(1.2)}60%{transform:scale(1.3)}70%{transform:scale(.9)}80%{transform:scale(1.2)}0%,to{transform:scale(1)}}');it(":root{--er-primary:#5e35b137;--er-primary-light:#5e35b125;--er-primary-dark:#5e35b1a6}"),Xe.__scopeId="data-v-1f6b314a",Xe.__file="packages/EmojiReaction.vue";var Ye=function(){return Ye=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ye.apply(this,arguments)};function ee(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})}function Y(r,e){var t={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(t=0)),t;)try{if(n=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,i=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){t.label=l[1];break}if(l[0]===6&&t.label<s[1]){t.label=s[1],s=l;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(l);break}s[2]&&t.ops.pop(),t.trys.pop();continue}l=e.call(r,t)}catch(c){l=[6,c],i=0}finally{n=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Mt(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],o=0,a=s.length;o<a;o++,i++)n[i]=s[o];return n}var Vt="3.3.6";function pe(r,e){return new Promise(function(t){return setTimeout(t,r,e)})}function Cr(r,e){e===void 0&&(e=1/0);var t=window.requestIdleCallback;return t?new Promise(function(n){return t.call(window,function(){return n()},{timeout:e})}):pe(Math.min(r,e))}function Lr(r){return r&&typeof r.then=="function"}function yt(r,e){try{var t=r();Lr(t)?t.then(function(n){return e(!0,n)},function(n){return e(!1,n)}):e(!0,t)}catch(n){e(!1,n)}}function bt(r,e,t){return t===void 0&&(t=16),ee(this,void 0,void 0,function(){var n,i,s;return Y(this,function(o){switch(o.label){case 0:n=Date.now(),i=0,o.label=1;case 1:return i<r.length?(e(r[i],i),s=Date.now(),s>=n+t?(n=s,[4,pe(0)]):[3,3]):[3,4];case 2:o.sent(),o.label=3;case 3:return++i,[3,1];case 4:return[2]}})})}function st(r){r.then(void 0,function(){})}function te(r,e){r=[r[0]>>>16,r[0]&65535,r[1]>>>16,r[1]&65535],e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];var t=[0,0,0,0];return t[3]+=r[3]+e[3],t[2]+=t[3]>>>16,t[3]&=65535,t[2]+=r[2]+e[2],t[1]+=t[2]>>>16,t[2]&=65535,t[1]+=r[1]+e[1],t[0]+=t[1]>>>16,t[1]&=65535,t[0]+=r[0]+e[0],t[0]&=65535,[t[0]<<16|t[1],t[2]<<16|t[3]]}function B(r,e){r=[r[0]>>>16,r[0]&65535,r[1]>>>16,r[1]&65535],e=[e[0]>>>16,e[0]&65535,e[1]>>>16,e[1]&65535];var t=[0,0,0,0];return t[3]+=r[3]*e[3],t[2]+=t[3]>>>16,t[3]&=65535,t[2]+=r[2]*e[3],t[1]+=t[2]>>>16,t[2]&=65535,t[2]+=r[3]*e[2],t[1]+=t[2]>>>16,t[2]&=65535,t[1]+=r[1]*e[3],t[0]+=t[1]>>>16,t[1]&=65535,t[1]+=r[2]*e[2],t[0]+=t[1]>>>16,t[1]&=65535,t[1]+=r[3]*e[1],t[0]+=t[1]>>>16,t[1]&=65535,t[0]+=r[0]*e[3]+r[1]*e[2]+r[2]*e[1]+r[3]*e[0],t[0]&=65535,[t[0]<<16|t[1],t[2]<<16|t[3]]}function le(r,e){return e%=64,e===32?[r[1],r[0]]:e<32?[r[0]<<e|r[1]>>>32-e,r[1]<<e|r[0]>>>32-e]:(e-=32,[r[1]<<e|r[0]>>>32-e,r[0]<<e|r[1]>>>32-e])}function M(r,e){return e%=64,e===0?r:e<32?[r[0]<<e|r[1]>>>32-e,r[1]<<e]:[r[1]<<e-32,0]}function O(r,e){return[r[0]^e[0],r[1]^e[1]]}function _t(r){return r=O(r,[0,r[0]>>>1]),r=B(r,[4283543511,3981806797]),r=O(r,[0,r[0]>>>1]),r=B(r,[3301882366,444984403]),r=O(r,[0,r[0]>>>1]),r}function Pr(r,e){r=r||"",e=e||0;var t=r.length%16,n=r.length-t,i=[0,e],s=[0,e],o=[0,0],a=[0,0],u=[2277735313,289559509],l=[1291169091,658871167],c;for(c=0;c<n;c=c+16)o=[r.charCodeAt(c+4)&255|(r.charCodeAt(c+5)&255)<<8|(r.charCodeAt(c+6)&255)<<16|(r.charCodeAt(c+7)&255)<<24,r.charCodeAt(c)&255|(r.charCodeAt(c+1)&255)<<8|(r.charCodeAt(c+2)&255)<<16|(r.charCodeAt(c+3)&255)<<24],a=[r.charCodeAt(c+12)&255|(r.charCodeAt(c+13)&255)<<8|(r.charCodeAt(c+14)&255)<<16|(r.charCodeAt(c+15)&255)<<24,r.charCodeAt(c+8)&255|(r.charCodeAt(c+9)&255)<<8|(r.charCodeAt(c+10)&255)<<16|(r.charCodeAt(c+11)&255)<<24],o=B(o,u),o=le(o,31),o=B(o,l),i=O(i,o),i=le(i,27),i=te(i,s),i=te(B(i,[0,5]),[0,1390208809]),a=B(a,l),a=le(a,33),a=B(a,u),s=O(s,a),s=le(s,31),s=te(s,i),s=te(B(s,[0,5]),[0,944331445]);switch(o=[0,0],a=[0,0],t){case 15:a=O(a,M([0,r.charCodeAt(c+14)],48));case 14:a=O(a,M([0,r.charCodeAt(c+13)],40));case 13:a=O(a,M([0,r.charCodeAt(c+12)],32));case 12:a=O(a,M([0,r.charCodeAt(c+11)],24));case 11:a=O(a,M([0,r.charCodeAt(c+10)],16));case 10:a=O(a,M([0,r.charCodeAt(c+9)],8));case 9:a=O(a,[0,r.charCodeAt(c+8)]),a=B(a,l),a=le(a,33),a=B(a,u),s=O(s,a);case 8:o=O(o,M([0,r.charCodeAt(c+7)],56));case 7:o=O(o,M([0,r.charCodeAt(c+6)],48));case 6:o=O(o,M([0,r.charCodeAt(c+5)],40));case 5:o=O(o,M([0,r.charCodeAt(c+4)],32));case 4:o=O(o,M([0,r.charCodeAt(c+3)],24));case 3:o=O(o,M([0,r.charCodeAt(c+2)],16));case 2:o=O(o,M([0,r.charCodeAt(c+1)],8));case 1:o=O(o,[0,r.charCodeAt(c)]),o=B(o,u),o=le(o,31),o=B(o,l),i=O(i,o)}return i=O(i,[0,r.length]),s=O(s,[0,r.length]),i=te(i,s),s=te(s,i),i=_t(i),s=_t(s),i=te(i,s),s=te(s,i),("00000000"+(i[0]>>>0).toString(16)).slice(-8)+("00000000"+(i[1]>>>0).toString(16)).slice(-8)+("00000000"+(s[0]>>>0).toString(16)).slice(-8)+("00000000"+(s[1]>>>0).toString(16)).slice(-8)}function Ir(r){var e;return Ye({name:r.name,message:r.message,stack:(e=r.stack)===null||e===void 0?void 0:e.split(`
`)},r)}function Fr(r,e){for(var t=0,n=r.length;t<n;++t)if(r[t]===e)return!0;return!1}function $r(r,e){return!Fr(r,e)}function ot(r){return parseInt(r)}function G(r){return parseFloat(r)}function Q(r,e){return typeof r=="number"&&isNaN(r)?e:r}function H(r){return r.reduce(function(e,t){return e+(t?1:0)},0)}function Nt(r,e){if(e===void 0&&(e=1),Math.abs(e)>=1)return Math.round(r/e)*e;var t=1/e;return Math.round(r*t)/t}function Dr(r){for(var e,t,n="Unexpected syntax '"+r+"'",i=/^\s*([a-z-]*)(.*)$/i.exec(r),s=i[1]||void 0,o={},a=/([.:#][\w-]+|\[.+?\])/gi,u=function(p,f){o[p]=o[p]||[],o[p].push(f)};;){var l=a.exec(i[2]);if(!l)break;var c=l[0];switch(c[0]){case".":u("class",c.slice(1));break;case"#":u("id",c.slice(1));break;case"[":{var h=/^\[([\w-]+)([~|^$*]?=("(.*?)"|([\w-]+)))?(\s+[is])?\]$/.exec(c);if(h)u(h[1],(t=(e=h[4])!==null&&e!==void 0?e:h[5])!==null&&t!==void 0?t:"");else throw new Error(n);break}default:throw new Error(n)}}return[s,o]}function wt(r){return r&&typeof r=="object"&&"message"in r?r:{message:r}}function Mr(r){return typeof r!="function"}function Vr(r,e){var t=new Promise(function(n){var i=Date.now();yt(r.bind(null,e),function(){for(var s=[],o=0;o<arguments.length;o++)s[o]=arguments[o];var a=Date.now()-i;if(!s[0])return n(function(){return{error:wt(s[1]),duration:a}});var u=s[1];if(Mr(u))return n(function(){return{value:u,duration:a}});n(function(){return new Promise(function(l){var c=Date.now();yt(u,function(){for(var h=[],p=0;p<arguments.length;p++)h[p]=arguments[p];var f=a+Date.now()-c;if(!h[0])return l({error:wt(h[1]),duration:f});l({value:h[1],duration:f})})})})})});return st(t),function(){return t.then(function(i){return i()})}}function Nr(r,e,t){var n=Object.keys(r).filter(function(s){return $r(t,s)}),i=Array(n.length);return bt(n,function(s,o){i[o]=Vr(r[s],e)}),function(){return ee(this,void 0,void 0,function(){var o,a,u,l,c,h,p;return Y(this,function(f){switch(f.label){case 0:for(o={},a=0,u=n;a<u.length;a++)l=u[a],o[l]=void 0;c=Array(n.length),h=function(){var v;return Y(this,function(y){switch(y.label){case 0:return v=!0,[4,bt(n,function(g,b){if(!c[b])if(i[b]){var C=i[b]().then(function(I){return o[g]=I});st(C),c[b]=C}else v=!1})];case 1:return y.sent(),v?[2,"break"]:[4,pe(1)];case 2:return y.sent(),[2]}})},f.label=1;case 1:return[5,h()];case 2:if(p=f.sent(),p==="break")return[3,4];f.label=3;case 3:return[3,1];case 4:return[4,Promise.all(c)];case 5:return f.sent(),[2,o]}})})}}function Ut(){var r=window,e=navigator;return H(["MSCSSMatrix"in r,"msSetImmediate"in r,"msIndexedDB"in r,"msMaxTouchPoints"in e,"msPointerEnabled"in e])>=4}function Ur(){var r=window,e=navigator;return H(["msWriteProfilerMark"in r,"MSStream"in r,"msLaunchUri"in e,"msSaveBlob"in e])>=3&&!Ut()}function at(){var r=window,e=navigator;return H(["webkitPersistentStorage"in e,"webkitTemporaryStorage"in e,e.vendor.indexOf("Google")===0,"webkitResolveLocalFileSystemURL"in r,"BatteryManager"in r,"webkitMediaStream"in r,"webkitSpeechGrammar"in r])>=5}function xe(){var r=window,e=navigator;return H(["ApplePayError"in r,"CSSPrimitiveValue"in r,"Counter"in r,e.vendor.indexOf("Apple")===0,"getStorageUpdates"in e,"WebKitMediaKeys"in r])>=4}function ct(){var r=window;return H(["safari"in r,!("DeviceMotionEvent"in r),!("ongestureend"in r),!("standalone"in navigator)])>=3}function Br(){var r,e,t=window;return H(["buildID"in navigator,"MozAppearance"in((e=(r=document.documentElement)===null||r===void 0?void 0:r.style)!==null&&e!==void 0?e:{}),"onmozfullscreenchange"in t,"mozInnerScreenX"in t,"CSSMozDocumentRule"in t,"CanvasCaptureMediaStream"in t])>=4}function Wr(){var r=window;return H([!("MediaSettingsRange"in r),"RTCEncodedAudioFrame"in r,""+r.Intl=="[object Intl]",""+r.Reflect=="[object Reflect]"])>=3}function Gr(){var r=window;return H(["DOMRectList"in r,"RTCPeerConnectionIceEvent"in r,"SVGGeometryElement"in r,"ontransitioncancel"in r])>=3}function Jr(){if(navigator.platform==="iPad")return!0;var r=screen,e=r.width/r.height;return H(["MediaSource"in window,!!Element.prototype.webkitRequestFullscreen,e>.65&&e<1.53])>=2}function Hr(){var r=document;return r.fullscreenElement||r.msFullscreenElement||r.mozFullScreenElement||r.webkitFullscreenElement||null}function Zr(){var r=document;return(r.exitFullscreen||r.msExitFullscreen||r.mozCancelFullScreen||r.webkitExitFullscreen).call(r)}function Bt(){var r=at(),e=Br();if(!r&&!e)return!1;var t=window;return H(["onorientationchange"in t,"orientation"in t,r&&!("SharedWorker"in t),e&&/android/i.test(navigator.appVersion)])>=2}function zr(){var r=window,e=r.OfflineAudioContext||r.webkitOfflineAudioContext;if(!e)return-2;if(Xr())return-1;var t=4500,n=5e3,i=new e(1,n,44100),s=i.createOscillator();s.type="triangle",s.frequency.value=1e4;var o=i.createDynamicsCompressor();o.threshold.value=-50,o.knee.value=40,o.ratio.value=12,o.attack.value=0,o.release.value=.25,s.connect(o),o.connect(i.destination),s.start(0);var a=Yr(i),u=a[0],l=a[1],c=u.then(function(h){return qr(h.getChannelData(0).subarray(t))},function(h){if(h.name==="timeout"||h.name==="suspended")return-3;throw h});return st(c),function(){return l(),c}}function Xr(){return xe()&&!ct()&&!Gr()}function Yr(r){var e=3,t=500,n=500,i=5e3,s=function(){},o=new Promise(function(a,u){var l=!1,c=0,h=0;r.oncomplete=function(v){return a(v.renderedBuffer)};var p=function(){setTimeout(function(){return u(kt("timeout"))},Math.min(n,h+i-Date.now()))},f=function(){try{switch(r.startRendering(),r.state){case"running":h=Date.now(),l&&p();break;case"suspended":document.hidden||c++,l&&c>=e?u(kt("suspended")):setTimeout(f,t);break}}catch(v){u(v)}};f(),s=function(){l||(l=!0,h>0&&p())}});return[o,s]}function qr(r){for(var e=0,t=0;t<r.length;++t)e+=Math.abs(r[t]);return e}function kt(r){var e=new Error(r);return e.name=r,e}function Wt(r,e,t){var n,i,s;return t===void 0&&(t=50),ee(this,void 0,void 0,function(){var o,a;return Y(this,function(u){switch(u.label){case 0:o=document,u.label=1;case 1:return o.body?[3,3]:[4,pe(t)];case 2:return u.sent(),[3,1];case 3:a=o.createElement("iframe"),u.label=4;case 4:return u.trys.push([4,,10,11]),[4,new Promise(function(l,c){var h=!1,p=function(){h=!0,l()},f=function(g){h=!0,c(g)};a.onload=p,a.onerror=f;var v=a.style;v.setProperty("display","block","important"),v.position="absolute",v.top="0",v.left="0",v.visibility="hidden",e&&"srcdoc"in a?a.srcdoc=e:a.src="about:blank",o.body.appendChild(a);var y=function(){var g,b;h||(((b=(g=a.contentWindow)===null||g===void 0?void 0:g.document)===null||b===void 0?void 0:b.readyState)==="complete"?p():setTimeout(y,10))};y()})];case 5:u.sent(),u.label=6;case 6:return!((i=(n=a.contentWindow)===null||n===void 0?void 0:n.document)===null||i===void 0)&&i.body?[3,8]:[4,pe(t)];case 7:return u.sent(),[3,6];case 8:return[4,r(a,a.contentWindow)];case 9:return[2,u.sent()];case 10:return(s=a.parentNode)===null||s===void 0||s.removeChild(a),[7];case 11:return[2]}})})}function Kr(r){for(var e=Dr(r),t=e[0],n=e[1],i=document.createElement(t!=null?t:"div"),s=0,o=Object.keys(n);s<o.length;s++){var a=o[s],u=n[a].join(" ");a==="style"?Qr(i.style,u):i.setAttribute(a,u)}return i}function Qr(r,e){for(var t=0,n=e.split(";");t<n.length;t++){var i=n[t],s=/^\s*([\w-]+)\s*:\s*(.+?)(\s*!([\w-]+))?\s*$/.exec(i);if(s){var o=s[1],a=s[2],u=s[4];r.setProperty(o,a,u||"")}}}var en="mmMwWLliI0O&1",tn="48px",ue=["monospace","sans-serif","serif"],St=["sans-serif-thin","ARNO PRO","Agency FB","Arabic Typesetting","Arial Unicode MS","AvantGarde Bk BT","BankGothic Md BT","Batang","Bitstream Vera Sans Mono","Calibri","Century","Century Gothic","Clarendon","EUROSTILE","Franklin Gothic","Futura Bk BT","Futura Md BT","GOTHAM","Gill Sans","HELV","Haettenschweiler","Helvetica Neue","Humanst521 BT","Leelawadee","Letter Gothic","Levenim MT","Lucida Bright","Lucida Sans","Menlo","MS Mincho","MS Outlook","MS Reference Specialty","MS UI Gothic","MT Extra","MYRIAD PRO","Marlett","Meiryo UI","Microsoft Uighur","Minion Pro","Monotype Corsiva","PMingLiU","Pristina","SCRIPTINA","Segoe UI Light","Serifa","SimHei","Small Fonts","Staccato222 BT","TRAJAN PRO","Univers CE 55 Medium","Vrinda","ZWAdobeF"];function rn(){return Wt(function(r,e){var t=e.document,n=t.body;n.style.fontSize=tn;var i=t.createElement("div"),s={},o={},a=function(y){var g=t.createElement("span"),b=g.style;return b.position="absolute",b.top="0",b.left="0",b.fontFamily=y,g.textContent=en,i.appendChild(g),g},u=function(y,g){return a("'"+y+"',"+g)},l=function(){return ue.map(a)},c=function(){for(var y={},g=function(A){y[A]=ue.map(function(W){return u(A,W)})},b=0,C=St;b<C.length;b++){var I=C[b];g(I)}return y},h=function(y){return ue.some(function(g,b){return y[b].offsetWidth!==s[g]||y[b].offsetHeight!==o[g]})},p=l(),f=c();n.appendChild(i);for(var v=0;v<ue.length;v++)s[ue[v]]=p[v].offsetWidth,o[ue[v]]=p[v].offsetHeight;return St.filter(function(y){return h(f[y])})})}function nn(){var r=navigator.plugins;if(!!r){for(var e=[],t=0;t<r.length;++t){var n=r[t];if(!!n){for(var i=[],s=0;s<n.length;++s){var o=n[s];i.push({type:o.type,suffixes:o.suffixes})}e.push({name:n.name,description:n.description,mimeTypes:i})}}return e}}function sn(){var r=!1,e,t,n=on(),i=n[0],s=n[1];if(!an(i,s))e=t="";else{r=cn(s),ln(i,s);var o=Be(i),a=Be(i);o!==a?e=t="unstable":(t=o,un(i,s),e=Be(i))}return{winding:r,geometry:e,text:t}}function on(){var r=document.createElement("canvas");return r.width=1,r.height=1,[r,r.getContext("2d")]}function an(r,e){return!!(e&&r.toDataURL)}function cn(r){return r.rect(0,0,10,10),r.rect(2,2,6,6),!r.isPointInPath(5,5,"evenodd")}function ln(r,e){r.width=240,r.height=60,e.textBaseline="alphabetic",e.fillStyle="#f60",e.fillRect(100,1,62,20),e.fillStyle="#069",e.font='11pt "Times New Roman"';var t="Cwm fjordbank gly "+String.fromCharCode(55357,56835);e.fillText(t,2,15),e.fillStyle="rgba(102, 204, 0, 0.2)",e.font="18pt Arial",e.fillText(t,4,45)}function un(r,e){r.width=122,r.height=110,e.globalCompositeOperation="multiply";for(var t=0,n=[["#f2f",40,40],["#2ff",80,40],["#ff2",60,80]];t<n.length;t++){var i=n[t],s=i[0],o=i[1],a=i[2];e.fillStyle=s,e.beginPath(),e.arc(o,a,40,0,Math.PI*2,!0),e.closePath(),e.fill()}e.fillStyle="#f9c",e.arc(60,60,60,0,Math.PI*2,!0),e.arc(60,60,20,0,Math.PI*2,!0),e.fill("evenodd")}function Be(r){return r.toDataURL()}function hn(){var r=navigator,e=0,t;r.maxTouchPoints!==void 0?e=ot(r.maxTouchPoints):r.msMaxTouchPoints!==void 0&&(e=r.msMaxTouchPoints);try{document.createEvent("TouchEvent"),t=!0}catch{t=!1}var n="ontouchstart"in window;return{maxTouchPoints:e,touchEvent:t,touchStart:n}}function dn(){return navigator.oscpu}function fn(){var r=navigator,e=[],t=r.language||r.userLanguage||r.browserLanguage||r.systemLanguage;if(t!==void 0&&e.push([t]),Array.isArray(r.languages))at()&&Wr()||e.push(r.languages);else if(typeof r.languages=="string"){var n=r.languages;n&&e.push(n.split(","))}return e}function vn(){return window.screen.colorDepth}function pn(){return Q(G(navigator.deviceMemory),void 0)}function mn(){var r=screen,e=function(n){return Q(ot(n),null)},t=[e(r.width),e(r.height)];return t.sort().reverse(),t}var gn=2500,yn=10,Oe,We;function bn(){if(We===void 0){var r=function(){var e=qe();Ke(e)?We=setTimeout(r,gn):(Oe=e,We=void 0)};r()}}function _n(){var r=this;return bn(),function(){return ee(r,void 0,void 0,function(){var e;return Y(this,function(t){switch(t.label){case 0:return e=qe(),Ke(e)?Oe?[2,Mt(Oe)]:Hr()?[4,Zr()]:[3,2]:[3,2];case 1:t.sent(),e=qe(),t.label=2;case 2:return Ke(e)||(Oe=e),[2,e]}})})}}function wn(){var r=this,e=_n();return function(){return ee(r,void 0,void 0,function(){var t,n;return Y(this,function(i){switch(i.label){case 0:return[4,e()];case 1:return t=i.sent(),n=function(s){return s===null?null:Nt(s,yn)},[2,[n(t[0]),n(t[1]),n(t[2]),n(t[3])]]}})})}}function qe(){var r=screen;return[Q(G(r.availTop),null),Q(G(r.width)-G(r.availWidth)-Q(G(r.availLeft),0),null),Q(G(r.height)-G(r.availHeight)-Q(G(r.availTop),0),null),Q(G(r.availLeft),null)]}function Ke(r){for(var e=0;e<4;++e)if(r[e])return!1;return!0}function kn(){return Q(ot(navigator.hardwareConcurrency),void 0)}function Sn(){var r,e=(r=window.Intl)===null||r===void 0?void 0:r.DateTimeFormat;if(e){var t=new e().resolvedOptions().timeZone;if(t)return t}var n=-xn();return"UTC"+(n>=0?"+":"")+Math.abs(n)}function xn(){var r=new Date().getFullYear();return Math.max(G(new Date(r,0,1).getTimezoneOffset()),G(new Date(r,6,1).getTimezoneOffset()))}function Tn(){try{return!!window.sessionStorage}catch{return!0}}function En(){try{return!!window.localStorage}catch{return!0}}function jn(){if(!(Ut()||Ur()))try{return!!window.indexedDB}catch{return!0}}function Rn(){return!!window.openDatabase}function On(){return navigator.cpuClass}function An(){var r=navigator.platform;return r==="MacIntel"&&xe()&&!ct()?Jr()?"iPad":"iPhone":r}function Cn(){return navigator.vendor||""}function Ln(){for(var r=[],e=0,t=["chrome","safari","__crWeb","__gCrWeb","yandex","__yb","__ybro","__firefox__","__edgeTrackingPreventionStatistics","webkit","oprt","samsungAr","ucweb","UCShellJava","puffinDevice"];e<t.length;e++){var n=t[e],i=window[n];i&&typeof i=="object"&&r.push(n)}return r.sort()}function Pn(){var r=document;try{r.cookie="cookietest=1; SameSite=Strict;";var e=r.cookie.indexOf("cookietest=")!==-1;return r.cookie="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",e}catch{return!1}}function In(){var r=atob;return{abpIndo:["#Iklan-Melayang","#Kolom-Iklan-728","#SidebarIklan-wrapper",r("YVt0aXRsZT0iN25hZ2EgcG9rZXIiIGld"),'[title="ALIENBOLA" i]'],abpvn:["#quangcaomb",r("Lmlvc0Fkc2lvc0Fkcy1sYXlvdXQ="),".quangcao",r("W2hyZWZePSJodHRwczovL3I4OC52bi8iXQ=="),r("W2hyZWZePSJodHRwczovL3piZXQudm4vIl0=")],adBlockFinland:[".mainostila",r("LnNwb25zb3JpdA=="),".ylamainos",r("YVtocmVmKj0iL2NsaWNrdGhyZ2guYXNwPyJd"),r("YVtocmVmXj0iaHR0cHM6Ly9hcHAucmVhZHBlYWsuY29tL2FkcyJd")],adBlockPersian:["#navbar_notice_50",".kadr",'TABLE[width="140px"]',"#divAgahi",r("I2FkMl9pbmxpbmU=")],adBlockWarningRemoval:["#adblock-honeypot",".adblocker-root",".wp_adblock_detect",r("LmhlYWRlci1ibG9ja2VkLWFk"),r("I2FkX2Jsb2NrZXI=")],adGuardAnnoyances:['amp-embed[type="zen"]',".hs-sosyal","#cookieconsentdiv",'div[class^="app_gdpr"]',".as-oil"],adGuardBase:[".BetterJsPopOverlay",r("I2FkXzMwMFgyNTA="),r("I2Jhbm5lcmZsb2F0MjI="),r("I2FkLWJhbm5lcg=="),r("I2NhbXBhaWduLWJhbm5lcg==")],adGuardChinese:[r("LlppX2FkX2FfSA=="),r("YVtocmVmKj0iL29kMDA1LmNvbSJd"),r("YVtocmVmKj0iLmh0aGJldDM0LmNvbSJd"),".qq_nr_lad","#widget-quan"],adGuardFrench:[r("I2Jsb2NrLXZpZXdzLWFkcy1zaWRlYmFyLWJsb2NrLWJsb2Nr"),"#pavePub",r("LmFkLWRlc2t0b3AtcmVjdGFuZ2xl"),".mobile_adhesion",".widgetadv"],adGuardGerman:[r("LmJhbm5lcml0ZW13ZXJidW5nX2hlYWRfMQ=="),r("LmJveHN0YXJ0d2VyYnVuZw=="),r("LndlcmJ1bmcz"),r("YVtocmVmXj0iaHR0cDovL3d3dy5laXMuZGUvaW5kZXgucGh0bWw/cmVmaWQ9Il0="),r("YVtocmVmXj0iaHR0cHM6Ly93d3cudGlwaWNvLmNvbS8/YWZmaWxpYXRlSWQ9Il0=")],adGuardJapanese:["#kauli_yad_1",r("YVtocmVmXj0iaHR0cDovL2FkMi50cmFmZmljZ2F0ZS5uZXQvIl0="),r("Ll9wb3BJbl9pbmZpbml0ZV9hZA=="),r("LmFkZ29vZ2xl"),r("LmFkX3JlZ3VsYXIz")],adGuardMobile:[r("YW1wLWF1dG8tYWRz"),r("LmFtcF9hZA=="),'amp-embed[type="24smi"]',"#mgid_iframe1",r("I2FkX2ludmlld19hcmVh")],adGuardRussian:[r("YVtocmVmXj0iaHR0cHM6Ly9hZC5sZXRtZWFkcy5jb20vIl0="),r("LnJlY2xhbWE="),'div[id^="smi2adblock"]',r("ZGl2W2lkXj0iQWRGb3hfYmFubmVyXyJd"),r("I2FkX3NxdWFyZQ==")],adGuardSocial:[r("YVtocmVmXj0iLy93d3cuc3R1bWJsZXVwb24uY29tL3N1Ym1pdD91cmw9Il0="),r("YVtocmVmXj0iLy90ZWxlZ3JhbS5tZS9zaGFyZS91cmw/Il0="),".etsy-tweet","#inlineShare",".popup-social"],adGuardSpanishPortuguese:["#barraPublicidade","#Publicidade","#publiEspecial","#queTooltip",r("W2hyZWZePSJodHRwOi8vYWRzLmdsaXNwYS5jb20vIl0=")],adGuardTrackingProtection:["#qoo-counter",r("YVtocmVmXj0iaHR0cDovL2NsaWNrLmhvdGxvZy5ydS8iXQ=="),r("YVtocmVmXj0iaHR0cDovL2hpdGNvdW50ZXIucnUvdG9wL3N0YXQucGhwIl0="),r("YVtocmVmXj0iaHR0cDovL3RvcC5tYWlsLnJ1L2p1bXAiXQ=="),"#top100counter"],adGuardTurkish:["#backkapat",r("I3Jla2xhbWk="),r("YVtocmVmXj0iaHR0cDovL2Fkc2Vydi5vbnRlay5jb20udHIvIl0="),r("YVtocmVmXj0iaHR0cDovL2l6bGVuemkuY29tL2NhbXBhaWduLyJd"),r("YVtocmVmXj0iaHR0cDovL3d3dy5pbnN0YWxsYWRzLm5ldC8iXQ==")],bulgarian:[r("dGQjZnJlZW5ldF90YWJsZV9hZHM="),"#ea_intext_div",".lapni-pop-over","#xenium_hot_offers",r("I25ld0Fk")],easyList:[r("I0FEX0NPTlRST0xfMjg="),r("LnNlY29uZC1wb3N0LWFkcy13cmFwcGVy"),".universalboxADVBOX03",r("LmFkdmVydGlzZW1lbnQtNzI4eDkw"),r("LnNxdWFyZV9hZHM=")],easyListChina:[r("YVtocmVmKj0iLndlbnNpeHVldGFuZy5jb20vIl0="),r("LmFwcGd1aWRlLXdyYXBbb25jbGljayo9ImJjZWJvcy5jb20iXQ=="),r("LmZyb250cGFnZUFkdk0="),"#taotaole","#aafoot.top_box"],easyListCookie:["#AdaCompliance.app-notice",".text-center.rgpd",".panel--cookie",".js-cookies-andromeda",".elxtr-consent"],easyListCzechSlovak:["#onlajny-stickers",r("I3Jla2xhbW5pLWJveA=="),r("LnJla2xhbWEtbWVnYWJvYXJk"),".sklik",r("W2lkXj0ic2tsaWtSZWtsYW1hIl0=")],easyListDutch:[r("I2FkdmVydGVudGll"),r("I3ZpcEFkbWFya3RCYW5uZXJCbG9jaw=="),".adstekst",r("YVtocmVmXj0iaHR0cHM6Ly94bHR1YmUubmwvY2xpY2svIl0="),"#semilo-lrectangle"],easyListGermany:[r("I0FkX1dpbjJkYXk="),r("I3dlcmJ1bmdzYm94MzAw"),r("YVtocmVmXj0iaHR0cDovL3d3dy5yb3RsaWNodGthcnRlaS5jb20vP3NjPSJd"),r("I3dlcmJ1bmdfd2lkZXNreXNjcmFwZXJfc2NyZWVu"),r("YVtocmVmXj0iaHR0cDovL2xhbmRpbmcucGFya3BsYXR6a2FydGVpLmNvbS8/YWc9Il0=")],easyListItaly:[r("LmJveF9hZHZfYW5udW5jaQ=="),".sb-box-pubbliredazionale",r("YVtocmVmXj0iaHR0cDovL2FmZmlsaWF6aW9uaWFkcy5zbmFpLml0LyJd"),r("YVtocmVmXj0iaHR0cHM6Ly9hZHNlcnZlci5odG1sLml0LyJd"),r("YVtocmVmXj0iaHR0cHM6Ly9hZmZpbGlhemlvbmlhZHMuc25haS5pdC8iXQ==")],easyListLithuania:[r("LnJla2xhbW9zX3RhcnBhcw=="),r("LnJla2xhbW9zX251b3JvZG9z"),r("aW1nW2FsdD0iUmVrbGFtaW5pcyBza3lkZWxpcyJd"),r("aW1nW2FsdD0iRGVkaWt1b3RpLmx0IHNlcnZlcmlhaSJd"),r("aW1nW2FsdD0iSG9zdGluZ2FzIFNlcnZlcmlhaS5sdCJd")],estonian:[r("QVtocmVmKj0iaHR0cDovL3BheTRyZXN1bHRzMjQuZXUiXQ==")],fanboyAnnoyances:["#feedback-tab","#taboola-below-article",".feedburnerFeedBlock",".widget-feedburner-counter",'[title="Subscribe to our blog"]'],fanboyAntiFacebook:[".util-bar-module-firefly-visible"],fanboyEnhancedTrackers:[".open.pushModal","#issuem-leaky-paywall-articles-zero-remaining-nag","#sovrn_container",'div[class$="-hide"][zoompage-fontsize][style="display: block;"]',".BlockNag__Card"],fanboySocial:[".td-tags-and-social-wrapper-box",".twitterContainer",".youtube-social",'a[title^="Like us on Facebook"]','img[alt^="Share on Digg"]'],frellwitSwedish:[r("YVtocmVmKj0iY2FzaW5vcHJvLnNlIl1bdGFyZ2V0PSJfYmxhbmsiXQ=="),r("YVtocmVmKj0iZG9rdG9yLXNlLm9uZWxpbmsubWUiXQ=="),"article.category-samarbete",r("ZGl2LmhvbGlkQWRz"),"ul.adsmodern"],greekAdBlock:[r("QVtocmVmKj0iYWRtYW4ub3RlbmV0LmdyL2NsaWNrPyJd"),r("QVtocmVmKj0iaHR0cDovL2F4aWFiYW5uZXJzLmV4b2R1cy5nci8iXQ=="),r("QVtocmVmKj0iaHR0cDovL2ludGVyYWN0aXZlLmZvcnRobmV0LmdyL2NsaWNrPyJd"),"DIV.agores300","TABLE.advright"],hungarian:["#cemp_doboz",".optimonk-iframe-container",r("LmFkX19tYWlu"),r("W2NsYXNzKj0iR29vZ2xlQWRzIl0="),"#hirdetesek_box"],iDontCareAboutCookies:['.alert-info[data-block-track*="CookieNotice"]',".ModuleTemplateCookieIndicator",".o--cookies--container",".cookie-msg-info-container","#cookies-policy-sticky"],icelandicAbp:[r("QVtocmVmXj0iL2ZyYW1ld29yay9yZXNvdXJjZXMvZm9ybXMvYWRzLmFzcHgiXQ==")],latvian:[r("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiAxMjBweDsgaGVpZ2h0OiA0MHB4OyBvdmVyZmxvdzogaGlkZGVuOyBwb3NpdGlvbjogcmVsYXRpdmU7Il0="),r("YVtocmVmPSJodHRwOi8vd3d3LnNhbGlkemluaS5sdi8iXVtzdHlsZT0iZGlzcGxheTogYmxvY2s7IHdpZHRoOiA4OHB4OyBoZWlnaHQ6IDMxcHg7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsiXQ==")],listKr:[r("YVtocmVmKj0iLy9hZC5wbGFuYnBsdXMuY28ua3IvIl0="),r("I2xpdmVyZUFkV3JhcHBlcg=="),r("YVtocmVmKj0iLy9hZHYuaW1hZHJlcC5jby5rci8iXQ=="),r("aW5zLmZhc3R2aWV3LWFk"),".revenue_unit_item.dable"],listeAr:[r("LmdlbWluaUxCMUFk"),".right-and-left-sponsers",r("YVtocmVmKj0iLmFmbGFtLmluZm8iXQ=="),r("YVtocmVmKj0iYm9vcmFxLm9yZyJd"),r("YVtocmVmKj0iZHViaXp6bGUuY29tL2FyLz91dG1fc291cmNlPSJd")],listeFr:[r("YVtocmVmXj0iaHR0cDovL3Byb21vLnZhZG9yLmNvbS8iXQ=="),r("I2FkY29udGFpbmVyX3JlY2hlcmNoZQ=="),r("YVtocmVmKj0id2Vib3JhbWEuZnIvZmNnaS1iaW4vIl0="),".site-pub-interstitiel",'div[id^="crt-"][data-criteo-id]'],officialPolish:["#ceneo-placeholder-ceneo-12",r("W2hyZWZePSJodHRwczovL2FmZi5zZW5kaHViLnBsLyJd"),r("YVtocmVmXj0iaHR0cDovL2Fkdm1hbmFnZXIudGVjaGZ1bi5wbC9yZWRpcmVjdC8iXQ=="),r("YVtocmVmXj0iaHR0cDovL3d3dy50cml6ZXIucGwvP3V0bV9zb3VyY2UiXQ=="),r("ZGl2I3NrYXBpZWNfYWQ=")],ro:[r("YVtocmVmXj0iLy9hZmZ0cmsuYWx0ZXgucm8vQ291bnRlci9DbGljayJd"),'a[href^="/magazin/"]',r("YVtocmVmXj0iaHR0cHM6Ly9ibGFja2ZyaWRheXNhbGVzLnJvL3Ryay9zaG9wLyJd"),r("YVtocmVmXj0iaHR0cHM6Ly9ldmVudC4ycGVyZm9ybWFudC5jb20vZXZlbnRzL2NsaWNrIl0="),r("YVtocmVmXj0iaHR0cHM6Ly9sLnByb2ZpdHNoYXJlLnJvLyJd")],ruAd:[r("YVtocmVmKj0iLy9mZWJyYXJlLnJ1LyJd"),r("YVtocmVmKj0iLy91dGltZy5ydS8iXQ=="),r("YVtocmVmKj0iOi8vY2hpa2lkaWtpLnJ1Il0="),"#pgeldiz",".yandex-rtb-block"],thaiAds:["a[href*=macau-uta-popup]",r("I2Fkcy1nb29nbGUtbWlkZGxlX3JlY3RhbmdsZS1ncm91cA=="),r("LmFkczMwMHM="),".bumq",".img-kosana"],webAnnoyancesUltralist:["#mod-social-share-2","#social-tools",r("LmN0cGwtZnVsbGJhbm5lcg=="),".zergnet-recommend",".yt.btn-link.btn-md.btn"]}}function Fn(r){var e=(r===void 0?{}:r).debug;return ee(this,void 0,void 0,function(){var t,n,i,s,o,a;return Y(this,function(u){switch(u.label){case 0:return $n()?(t=In(),n=Object.keys(t),i=(a=[]).concat.apply(a,n.map(function(l){return t[l]})),[4,Dn(i)]):[2,void 0];case 1:return s=u.sent(),e&&Mn(t,s),o=n.filter(function(l){var c=t[l],h=H(c.map(function(p){return s[p]}));return h>c.length*.6}),o.sort(),[2,o]}})})}function $n(){return xe()||Bt()}function Dn(r){var e;return ee(this,void 0,void 0,function(){var t,n,i,s,u,o,a,u;return Y(this,function(l){switch(l.label){case 0:for(t=document,n=t.createElement("div"),i=new Array(r.length),s={},xt(n),u=0;u<r.length;++u)o=Kr(r[u]),a=t.createElement("div"),xt(a),a.appendChild(o),n.appendChild(a),i[u]=o;l.label=1;case 1:return t.body?[3,3]:[4,pe(50)];case 2:return l.sent(),[3,1];case 3:t.body.appendChild(n);try{for(u=0;u<r.length;++u)i[u].offsetParent||(s[r[u]]=!0)}finally{(e=n.parentNode)===null||e===void 0||e.removeChild(n)}return[2,s]}})})}function xt(r){r.style.setProperty("display","block","important")}function Mn(r,e){for(var t="DOM blockers debug:\n```",n=0,i=Object.keys(r);n<i.length;n++){var s=i[n];t+=`
`+s+":";for(var o=0,a=r[s];o<a.length;o++){var u=a[o];t+=`
  `+(e[u]?"\u{1F6AB}":"\u27A1\uFE0F")+" "+u}}console.log(t+"\n```")}function Vn(){for(var r=0,e=["rec2020","p3","srgb"];r<e.length;r++){var t=e[r];if(matchMedia("(color-gamut: "+t+")").matches)return t}}function Nn(){if(Tt("inverted"))return!0;if(Tt("none"))return!1}function Tt(r){return matchMedia("(inverted-colors: "+r+")").matches}function Un(){if(Et("active"))return!0;if(Et("none"))return!1}function Et(r){return matchMedia("(forced-colors: "+r+")").matches}var Bn=100;function Wn(){if(!!matchMedia("(min-monochrome: 0)").matches){for(var r=0;r<=Bn;++r)if(matchMedia("(max-monochrome: "+r+")").matches)return r;throw new Error("Too high value")}}function Gn(){if(he("no-preference"))return 0;if(he("high")||he("more"))return 1;if(he("low")||he("less"))return-1;if(he("forced"))return 10}function he(r){return matchMedia("(prefers-contrast: "+r+")").matches}function Jn(){if(jt("reduce"))return!0;if(jt("no-preference"))return!1}function jt(r){return matchMedia("(prefers-reduced-motion: "+r+")").matches}function Hn(){if(Rt("high"))return!0;if(Rt("standard"))return!1}function Rt(r){return matchMedia("(dynamic-range: "+r+")").matches}var S=Math,F=function(){return 0};function Zn(){var r=S.acos||F,e=S.acosh||F,t=S.asin||F,n=S.asinh||F,i=S.atanh||F,s=S.atan||F,o=S.sin||F,a=S.sinh||F,u=S.cos||F,l=S.cosh||F,c=S.tan||F,h=S.tanh||F,p=S.exp||F,f=S.expm1||F,v=S.log1p||F,y=function(w){return S.pow(S.PI,w)},g=function(w){return S.log(w+S.sqrt(w*w-1))},b=function(w){return S.log(w+S.sqrt(w*w+1))},C=function(w){return S.log((1+w)/(1-w))/2},I=function(w){return S.exp(w)-1/S.exp(w)/2},A=function(w){return(S.exp(w)+1/S.exp(w))/2},W=function(w){return S.exp(w)-1},De=function(w){return(S.exp(2*w)-1)/(S.exp(2*w)+1)},Me=function(w){return S.log(1+w)};return{acos:r(.12312423423423424),acosh:e(1e308),acoshPf:g(1e154),asin:t(.12312423423423424),asinh:n(1),asinhPf:b(1),atanh:i(.5),atanhPf:C(.5),atan:s(.5),sin:o(-1e300),sinh:a(1),sinhPf:I(1),cos:u(10.000000000123),cosh:l(1),coshPf:A(1),tan:c(-1e300),tanh:h(1),tanhPf:De(1),exp:p(1),expm1:f(1),expm1Pf:W(1),log1p:v(10),log1pPf:Me(10),powPI:y(-100)}}var zn="mmMwWLliI0fiflO&1",Ge={default:[],apple:[{font:"-apple-system-body"}],serif:[{fontFamily:"serif"}],sans:[{fontFamily:"sans-serif"}],mono:[{fontFamily:"monospace"}],min:[{fontSize:"1px"}],system:[{fontFamily:"system-ui"}]};function Xn(){return Yn(function(r,e){for(var t={},n={},i=0,s=Object.keys(Ge);i<s.length;i++){var o=s[i],a=Ge[o],u=a[0],l=u===void 0?{}:u,c=a[1],h=c===void 0?zn:c,p=r.createElement("span");p.textContent=h,p.style.whiteSpace="nowrap";for(var f=0,v=Object.keys(l);f<v.length;f++){var y=v[f],g=l[y];g!==void 0&&(p.style[y]=g)}t[o]=p,e.appendChild(r.createElement("br")),e.appendChild(p)}for(var b=0,C=Object.keys(Ge);b<C.length;b++){var o=C[b];n[o]=t[o].getBoundingClientRect().width}return n})}function Yn(r,e){return e===void 0&&(e=4e3),Wt(function(t,n){var i=n.document,s=i.body,o=s.style;o.width=e+"px",o.webkitTextSizeAdjust=o.textSizeAdjust="none",at()?s.style.zoom=""+1/n.devicePixelRatio:xe()&&(s.style.zoom="reset");var a=i.createElement("div");return a.textContent=Mt(Array(e/20<<0)).map(function(){return"word"}).join(" "),s.appendChild(a),r(i,s)},'<!doctype html><html><head><meta name="viewport" content="width=device-width, initial-scale=1">')}var qn={fonts:rn,domBlockers:Fn,fontPreferences:Xn,audio:zr,screenFrame:wn,osCpu:dn,languages:fn,colorDepth:vn,deviceMemory:pn,screenResolution:mn,hardwareConcurrency:kn,timezone:Sn,sessionStorage:Tn,localStorage:En,indexedDB:jn,openDatabase:Rn,cpuClass:On,platform:An,plugins:nn,canvas:sn,touchSupport:hn,vendor:Cn,vendorFlavors:Ln,cookiesEnabled:Pn,colorGamut:Vn,invertedColors:Nn,forcedColors:Un,monochrome:Wn,contrast:Gn,reducedMotion:Jn,hdr:Hn,math:Zn};function Kn(r){return Nr(qn,r,[])}var Qn="$ if upgrade to Pro: https://fpjs.dev/pro";function ei(r){var e=ti(r),t=ri(e);return{score:e,comment:Qn.replace(/\$/g,""+t)}}function ti(r){if(Bt())return .4;if(xe())return ct()?.5:.3;var e=r.platform.value||"";return/^Win/.test(e)?.6:/^Mac/.test(e)?.5:.7}function ri(r){return Nt(.99+.01*r,1e-4)}function ni(r){for(var e="",t=0,n=Object.keys(r).sort();t<n.length;t++){var i=n[t],s=r[i],o=s.error?"error":JSON.stringify(s.value);e+=(e?"|":"")+i.replace(/([:|\\])/g,"\\$1")+":"+o}return e}function Gt(r){return JSON.stringify(r,function(e,t){return t instanceof Error?Ir(t):t},2)}function Jt(r){return Pr(ni(r))}function ii(r){var e,t=ei(r);return{get visitorId(){return e===void 0&&(e=Jt(this.components)),e},set visitorId(n){e=n},confidence:t,components:r,version:Vt}}function si(r){return r===void 0&&(r=50),Cr(r,r*2)}function oi(r,e){var t=Date.now();return{get:function(n){return ee(this,void 0,void 0,function(){var i,s,o;return Y(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,r()];case 1:return s=a.sent(),o=ii(s),(e||(n==null?void 0:n.debug))&&console.log("Copy the text below to get the debug data:\n\n```\nversion: "+o.version+`
userAgent: `+navigator.userAgent+`
timeBetweenLoadAndGet: `+(i-t)+`
visitorId: `+o.visitorId+`
components: `+Gt(s)+"\n```"),[2,o]}})})}}}function ai(){if(!(window.__fpjs_d_m||Math.random()>=.001))try{var r=new XMLHttpRequest;r.open("get","https://m1.openfpcdn.io/fingerprintjs/v"+Vt+"/npm-monitoring",!0),r.send()}catch(e){console.error(e)}}function ci(r){var e=r===void 0?{}:r,t=e.delayFallback,n=e.debug,i=e.monitoring,s=i===void 0?!0:i;return ee(this,void 0,void 0,function(){var o;return Y(this,function(a){switch(a.label){case 0:return s&&ai(),[4,si(t)];case 1:return a.sent(),o=Kn({debug:n}),[2,oi(o,n)]}})})}var li={load:ci,hashComponents:Jt,componentsToDebugString:Gt},ui=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};const hi=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>ui(void 0,void 0,void 0,function*(){return yield(yield Ce(()=>Promise.resolve().then(()=>Le),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)};class lt extends Error{constructor(e,t="FunctionsError",n){super(e),super.name=t,this.context=n}}class di extends lt{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class fi extends lt{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class vi extends lt{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var pi=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};class mi{constructor(e,{headers:t={},customFetch:n}={}){this.url=e,this.headers=t,this.fetch=hi(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return pi(this,void 0,void 0,function*(){try{const{headers:i,body:s}=t;let o={},a;s&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&s instanceof Blob||s instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=s):typeof s=="string"?(o["Content-Type"]="text/plain",a=s):typeof FormData<"u"&&s instanceof FormData?a=s:(o["Content-Type"]="application/json",a=JSON.stringify(s)));const u=yield this.fetch(`${this.url}/${e}`,{method:"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),i),body:a}).catch(p=>{throw new di(p)}),l=u.headers.get("x-relay-error");if(l&&l==="true")throw new fi(u);if(!u.ok)throw new vi(u);let c=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),h;return c==="application/json"?h=yield u.json():c==="application/octet-stream"?h=yield u.blob():c==="multipart/form-data"?h=yield u.formData():h=yield u.text(),{data:h,error:null}}catch(i){return{data:null,error:i}}})}}var gi=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yi(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var ke={exports:{}};(function(r,e){var t=typeof self<"u"?self:gi,n=function(){function s(){this.fetch=!1,this.DOMException=t.DOMException}return s.prototype=t,new s}();(function(s){(function(o){var a={searchParams:"URLSearchParams"in s,iterable:"Symbol"in s&&"iterator"in Symbol,blob:"FileReader"in s&&"Blob"in s&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in s,arrayBuffer:"ArrayBuffer"in s};function u(d){return d&&DataView.prototype.isPrototypeOf(d)}if(a.arrayBuffer)var l=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(d){return d&&l.indexOf(Object.prototype.toString.call(d))>-1};function h(d){if(typeof d!="string"&&(d=String(d)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(d))throw new TypeError("Invalid character in header field name");return d.toLowerCase()}function p(d){return typeof d!="string"&&(d=String(d)),d}function f(d){var m={next:function(){var _=d.shift();return{done:_===void 0,value:_}}};return a.iterable&&(m[Symbol.iterator]=function(){return m}),m}function v(d){this.map={},d instanceof v?d.forEach(function(m,_){this.append(_,m)},this):Array.isArray(d)?d.forEach(function(m){this.append(m[0],m[1])},this):d&&Object.getOwnPropertyNames(d).forEach(function(m){this.append(m,d[m])},this)}v.prototype.append=function(d,m){d=h(d),m=p(m);var _=this.map[d];this.map[d]=_?_+", "+m:m},v.prototype.delete=function(d){delete this.map[h(d)]},v.prototype.get=function(d){return d=h(d),this.has(d)?this.map[d]:null},v.prototype.has=function(d){return this.map.hasOwnProperty(h(d))},v.prototype.set=function(d,m){this.map[h(d)]=p(m)},v.prototype.forEach=function(d,m){for(var _ in this.map)this.map.hasOwnProperty(_)&&d.call(m,this.map[_],_,this)},v.prototype.keys=function(){var d=[];return this.forEach(function(m,_){d.push(_)}),f(d)},v.prototype.values=function(){var d=[];return this.forEach(function(m){d.push(m)}),f(d)},v.prototype.entries=function(){var d=[];return this.forEach(function(m,_){d.push([_,m])}),f(d)},a.iterable&&(v.prototype[Symbol.iterator]=v.prototype.entries);function y(d){if(d.bodyUsed)return Promise.reject(new TypeError("Already read"));d.bodyUsed=!0}function g(d){return new Promise(function(m,_){d.onload=function(){m(d.result)},d.onerror=function(){_(d.error)}})}function b(d){var m=new FileReader,_=g(m);return m.readAsArrayBuffer(d),_}function C(d){var m=new FileReader,_=g(m);return m.readAsText(d),_}function I(d){for(var m=new Uint8Array(d),_=new Array(m.length),P=0;P<m.length;P++)_[P]=String.fromCharCode(m[P]);return _.join("")}function A(d){if(d.slice)return d.slice(0);var m=new Uint8Array(d.byteLength);return m.set(new Uint8Array(d)),m.buffer}function W(){return this.bodyUsed=!1,this._initBody=function(d){this._bodyInit=d,d?typeof d=="string"?this._bodyText=d:a.blob&&Blob.prototype.isPrototypeOf(d)?this._bodyBlob=d:a.formData&&FormData.prototype.isPrototypeOf(d)?this._bodyFormData=d:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)?this._bodyText=d.toString():a.arrayBuffer&&a.blob&&u(d)?(this._bodyArrayBuffer=A(d.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(d)||c(d))?this._bodyArrayBuffer=A(d):this._bodyText=d=Object.prototype.toString.call(d):this._bodyText="",this.headers.get("content-type")||(typeof d=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(d)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var d=y(this);if(d)return d;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?y(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(b)}),this.text=function(){var d=y(this);if(d)return d;if(this._bodyBlob)return C(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(I(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(rr)}),this.json=function(){return this.text().then(JSON.parse)},this}var De=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function Me(d){var m=d.toUpperCase();return De.indexOf(m)>-1?m:d}function w(d,m){m=m||{};var _=m.body;if(d instanceof w){if(d.bodyUsed)throw new TypeError("Already read");this.url=d.url,this.credentials=d.credentials,m.headers||(this.headers=new v(d.headers)),this.method=d.method,this.mode=d.mode,this.signal=d.signal,!_&&d._bodyInit!=null&&(_=d._bodyInit,d.bodyUsed=!0)}else this.url=String(d);if(this.credentials=m.credentials||this.credentials||"same-origin",(m.headers||!this.headers)&&(this.headers=new v(m.headers)),this.method=Me(m.method||this.method||"GET"),this.mode=m.mode||this.mode||null,this.signal=m.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&_)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(_)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})};function rr(d){var m=new FormData;return d.trim().split("&").forEach(function(_){if(_){var P=_.split("="),L=P.shift().replace(/\+/g," "),T=P.join("=").replace(/\+/g," ");m.append(decodeURIComponent(L),decodeURIComponent(T))}}),m}function nr(d){var m=new v,_=d.replace(/\r?\n[\t ]+/g," ");return _.split(/\r?\n/).forEach(function(P){var L=P.split(":"),T=L.shift().trim();if(T){var Te=L.join(":").trim();m.append(T,Te)}}),m}W.call(w.prototype);function Z(d,m){m||(m={}),this.type="default",this.status=m.status===void 0?200:m.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in m?m.statusText:"OK",this.headers=new v(m.headers),this.url=m.url||"",this._initBody(d)}W.call(Z.prototype),Z.prototype.clone=function(){return new Z(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new v(this.headers),url:this.url})},Z.error=function(){var d=new Z(null,{status:0,statusText:""});return d.type="error",d};var ir=[301,302,303,307,308];Z.redirect=function(d,m){if(ir.indexOf(m)===-1)throw new RangeError("Invalid status code");return new Z(null,{status:m,headers:{location:d}})},o.DOMException=s.DOMException;try{new o.DOMException}catch{o.DOMException=function(m,_){this.message=m,this.name=_;var P=Error(m);this.stack=P.stack},o.DOMException.prototype=Object.create(Error.prototype),o.DOMException.prototype.constructor=o.DOMException}function Ve(d,m){return new Promise(function(_,P){var L=new w(d,m);if(L.signal&&L.signal.aborted)return P(new o.DOMException("Aborted","AbortError"));var T=new XMLHttpRequest;function Te(){T.abort()}T.onload=function(){var ge={status:T.status,statusText:T.statusText,headers:nr(T.getAllResponseHeaders()||"")};ge.url="responseURL"in T?T.responseURL:ge.headers.get("X-Request-URL");var Ne="response"in T?T.response:T.responseText;_(new Z(Ne,ge))},T.onerror=function(){P(new TypeError("Network request failed"))},T.ontimeout=function(){P(new TypeError("Network request failed"))},T.onabort=function(){P(new o.DOMException("Aborted","AbortError"))},T.open(L.method,L.url,!0),L.credentials==="include"?T.withCredentials=!0:L.credentials==="omit"&&(T.withCredentials=!1),"responseType"in T&&a.blob&&(T.responseType="blob"),L.headers.forEach(function(ge,Ne){T.setRequestHeader(Ne,ge)}),L.signal&&(L.signal.addEventListener("abort",Te),T.onreadystatechange=function(){T.readyState===4&&L.signal.removeEventListener("abort",Te)}),T.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return Ve.polyfill=!0,s.fetch||(s.fetch=Ve,s.Headers=v,s.Request=w,s.Response=Z),o.Headers=v,o.Request=w,o.Response=Z,o.fetch=Ve,Object.defineProperty(o,"__esModule",{value:!0}),o})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;e=i.fetch,e.default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,r.exports=e})(ke,ke.exports);const ut=yi(ke.exports),Le=vr({__proto__:null,default:ut},[ke.exports]);var bi=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};class _i{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.allowEmpty=e.allowEmpty,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=ut:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>bi(this,void 0,void 0,function*(){var o,a,u;let l=null,c=null,h=null,p=s.status,f=s.statusText;if(s.ok){if(this.method!=="HEAD"){const b=yield s.text();b===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?c=b:c=JSON.parse(b))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");y&&g&&g.length>1&&(h=parseInt(g[1]))}else{const y=yield s.text();try{l=JSON.parse(y)}catch{l={message:y}}if(l&&this.allowEmpty&&((u=l==null?void 0:l.details)===null||u===void 0?void 0:u.includes("Results contain 0 rows"))&&(l=null,p=200,f="OK"),l&&this.shouldThrowOnError)throw l}return{error:l,data:c,count:h,status:p,statusText:f}}));return this.shouldThrowOnError||(i=i.catch(s=>({error:{message:`FetchError: ${s.message}`,details:"",hint:"",code:s.code||""},data:null,count:null,status:0,statusText:""}))),i.then(e,t)}}class wi extends _i{select(e){let t=!1;const n=(e!=null?e:"*").split("").map(i=>/\s/.test(i)&&!t?"":(i==='"'&&(t=!t),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:i}={}){const s=i?`${i}.order`:"order",o=this.url.searchParams.get(s);return this.url.searchParams.set(s,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t}={}){const n=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:n}={}){const i=typeof n>"u"?"offset":`${n}.offset`,s=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(s,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),u=this.headers.Accept;return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${a};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}}class ve extends wi{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=t.map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${s}fts${o}.${t}`),this}match(e){return Object.entries(e).forEach(([t,n])=>{this.url.searchParams.append(t,`eq.${n}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t}={}){const n=t?`${t}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}}class ki{constructor(e,{headers:t={},schema:n,fetch:i}){this.url=e,this.headers=t,this.schema=n,this.fetch=i}select(e,{head:t=!1,count:n}={}){const i=t?"HEAD":"GET";let s=!1;const o=(e!=null?e:"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new ve({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t}={}){const n="POST",i=[],s=e;if(t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((a,u)=>a.concat(Object.keys(u)),[]);if(o.length>0){const a=[...new Set(o)].map(u=>`"${u}"`);this.url.searchParams.set("columns",a.join(","))}}return new ve({method:n,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:i}={}){const s="POST",o=[`resolution=${n?"ignore":"merge"}-duplicates`];t!==void 0&&this.url.searchParams.set("on_conflict",t);const a=e;return i&&o.push(`count=${i}`),this.headers.Prefer&&o.unshift(this.headers.Prefer),this.headers.Prefer=o.join(","),new ve({method:s,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n="PATCH",i=[],s=e;return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new ve({method:n,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new ve({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}const Si="1.1.0",xi={"X-Client-Info":`postgrest-js/${Si}`};class Ti{constructor(e,{headers:t={},schema:n,fetch:i}={}){this.url=e,this.headers=Object.assign(Object.assign({},xi),t),this.schema=n,this.fetch=i}from(e){const t=new URL(`${this.url}/${e}`);return new ki(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}rpc(e,t={},{head:n=!1,count:i}={}){let s;const o=new URL(`${this.url}/rpc/${e}`);let a;n?(s="HEAD",Object.entries(t).forEach(([l,c])=>{o.searchParams.append(l,`${c}`)})):(s="POST",a=t);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new ve({method:s,url:o,headers:u,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}}var Je,Ot;function Ei(){if(Ot)return Je;Ot=1;var r=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Je=function(){if(this)return this;if(typeof globalThis=="object"&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return r()}try{return __global__||r()}finally{delete Object.prototype.__global__}}(),Je}const ji="websocket",Ri="Websocket Client & Server Library implementing the WebSocket protocol as specified in RFC 6455.",Oi=["websocket","websockets","socket","networking","comet","push","RFC-6455","realtime","server","client"],Ai="Brian McKelvey <theturtle32@gmail.com> (https://github.com/theturtle32)",Ci=["I\xF1aki Baz Castillo <ibc@aliax.net> (http://dev.sipdoc.net)"],Li="1.0.34",Pi={type:"git",url:"https://github.com/theturtle32/WebSocket-Node.git"},Ii="https://github.com/theturtle32/WebSocket-Node",Fi={node:">=4.0.0"},$i={bufferutil:"^4.0.1",debug:"^2.2.0","es5-ext":"^0.10.50","typedarray-to-buffer":"^3.1.5","utf-8-validate":"^5.0.2",yaeti:"^0.0.6"},Di={"buffer-equal":"^1.0.0",gulp:"^4.0.2","gulp-jshint":"^2.0.4","jshint-stylish":"^2.2.1",jshint:"^2.0.0",tape:"^4.9.1"},Mi={verbose:!1},Vi={test:"tape test/unit/*.js",gulp:"gulp"},Ni="index",Ui={lib:"./lib"},Bi="lib/browser.js",Wi="Apache-2.0",Gi={name:ji,description:Ri,keywords:Oi,author:Ai,contributors:Ci,version:Li,repository:Pi,homepage:Ii,engines:Fi,dependencies:$i,devDependencies:Di,config:Mi,scripts:Vi,main:Ni,directories:Ui,browser:Bi,license:Wi};var Ji=Gi.version,ie;if(typeof globalThis=="object")ie=globalThis;else try{ie=Ei()}catch{}finally{if(!ie&&typeof window<"u"&&(ie=window),!ie)throw new Error("Could not determine global this")}var Se=ie.WebSocket||ie.MozWebSocket,Hi=Ji;function Ht(r,e){var t;return e?t=new Se(r,e):t=new Se(r),t}Se&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach(function(r){Object.defineProperty(Ht,r,{get:function(){return Se[r]}})});var Zi={w3cwebsocket:Se?Ht:null,version:Hi};const zi="2.1.0",Xi={"X-Client-Info":`realtime-js/${zi}`},Yi="1.0.0",Zt=1e4,qi=1e3;var _e;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(_e||(_e={}));var N;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(N||(N={}));var J;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(J||(J={}));var Qe;(function(r){r.websocket="websocket"})(Qe||(Qe={}));var se;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(se||(se={}));class zt{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}class Ki{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const i=t.getUint8(1),s=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+i));o=o+i;const u=n.decode(e.slice(o,o+s));o=o+s;const l=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:u,payload:l}}}class He{constructor(e,t,n={},i=Zt){this.channel=e,this.event=t,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){if(this._hasReceived("timeout"))return;this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})==="rate limited"&&(this.rateLimited=!0)}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){!this.refEvent||this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var At;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(At||(At={}));class we{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(t==null?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=we.syncState(this.state,i,s,o),this.pendingDiffs.forEach(u=>{this.state=we.syncDiff(this.state,u,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{const{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=we.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,i){const s=this.cloneDeep(e),o=this.transformState(t),a={},u={};return this.map(s,(l,c)=>{o[l]||(u[l]=c)}),this.map(o,(l,c)=>{const h=s[l];if(h){const p=c.map(g=>g.presence_ref),f=h.map(g=>g.presence_ref),v=c.filter(g=>f.indexOf(g.presence_ref)<0),y=h.filter(g=>p.indexOf(g.presence_ref)<0);v.length>0&&(a[l]=v),y.length>0&&(u[l]=y)}else a[l]=c}),this.syncDiff(s,{joins:a,leaves:u},n,i)}static syncDiff(e,t,n,i){const{joins:s,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,u)=>{var l;const c=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(u),c.length>0){const h=e[a].map(f=>f.presence_ref),p=c.filter(f=>h.indexOf(f.presence_ref)<0);e[a].unshift(...p)}n(a,c,u)}),this.map(o,(a,u)=>{let l=e[a];if(!l)return;const c=u.map(h=>h.presence_ref);l=l.filter(h=>c.indexOf(h.presence_ref)<0),e[a]=l,i(a,l,u),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const i=e[n];return"metas"in i?t[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):t[n]=i,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var E;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(E||(E={}));const Ct=(r,e,t={})=>{var n;const i=(n=t.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((s,o)=>(s[o]=Qi(o,r,e,i),s),{})},Qi=(r,e,t,n)=>{const i=e.find(a=>a.name===r),s=i==null?void 0:i.type,o=t[r];return s&&!n.includes(s)?Xt(s,o):et(o)},Xt=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return ns(e,t)}switch(r){case E.bool:return es(e);case E.float4:case E.float8:case E.int2:case E.int4:case E.int8:case E.numeric:case E.oid:return ts(e);case E.json:case E.jsonb:return rs(e);case E.timestamp:return is(e);case E.abstime:case E.date:case E.daterange:case E.int4range:case E.int8range:case E.money:case E.reltime:case E.text:case E.time:case E.timestamptz:case E.timetz:case E.tsrange:case E.tstzrange:return et(e);default:return et(e)}},et=r=>r,es=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},ts=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},rs=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},ns=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let s;const o=r.slice(1,t);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Xt(e,a))}return r},is=r=>typeof r=="string"?r.replace(" ","T"):r;var Lt=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})},Pt;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(Pt||(Pt={}));var It;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes"})(It||(It={}));var Ft;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Ft||(Ft={}));class ht{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=N.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},t.config),this.timeout=this.socket.timeout,this.joinPush=new He(this,J.join,this.params,this.timeout),this.rejoinTimer=new zt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=N.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=N.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=N.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{!this._isJoining()||(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=N.errored,this.rejoinTimer.scheduleTimeout())}),this._on(J.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new we(this)}subscribe(e,t=this.timeout){var n,i;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:s,presence:o}}=this.params;this._onError(l=>e&&e("CHANNEL_ERROR",l)),this._onClose(()=>e&&e("CLOSED"));const a={},u={broadcast:s,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(l=>l.filter))!==null&&i!==void 0?i:[]};this.socket.accessToken&&(a.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",({postgres_changes:l})=>{var c;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),l===void 0){e&&e("SUBSCRIBED");return}else{const h=this.bindings.postgres_changes,p=(c=h==null?void 0:h.length)!==null&&c!==void 0?c:0,f=[];for(let v=0;v<p;v++){const y=h[v],{filter:{event:g,schema:b,table:C,filter:I}}=y,A=l&&l[v];if(A&&A.event===g&&A.schema===b&&A.table===C&&A.filter===I)f.push(Object.assign(Object.assign({},y),{id:A.id}));else{this.unsubscribe(),e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=f,e&&e("SUBSCRIBED");return}}).receive("error",l=>{e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(l).join(", ")||"error")))}).receive("timeout",()=>{e&&e("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(e,t={}){return Lt(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)})}untrack(e={}){return Lt(this,void 0,void 0,function*(){return yield this.send({type:"presence",event:"untrack"},e)})}on(e,t,n){return this._on(e,t,n)}send(e,t={}){return new Promise(n=>{var i,s,o;const a=this._push(e.type,e,t.timeout||this.timeout);a.rateLimited&&n("rate limited"),e.type==="broadcast"&&!(!((o=(s=(i=this.params)===null||i===void 0?void 0:i.config)===null||s===void 0?void 0:s.broadcast)===null||o===void 0)&&o.ack)&&n("ok"),a.receive("ok",()=>n("ok")),a.receive("timeout",()=>n("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=N.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(J.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{const i=new He(this,J.leave,{},e);i.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new He(this,e,t,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var i,s;const o=e.toLocaleLowerCase(),{close:a,error:u,leave:l,join:c}=J;if(n&&[a,u,l,c].indexOf(o)>=0&&n!==this._joinRef())return;let p=this._onMessage(o,t,n);if(t&&!p)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var v,y,g;return((v=f.filter)===null||v===void 0?void 0:v.event)==="*"||((g=(y=f.filter)===null||y===void 0?void 0:y.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(f=>f.callback(p,n)):(s=this.bindings[o])===null||s===void 0||s.filter(f=>{var v,y,g,b,C,I;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){const A=f.id,W=(v=f.filter)===null||v===void 0?void 0:v.event;return A&&((y=t.ids)===null||y===void 0?void 0:y.includes(A))&&(W==="*"||(W==null?void 0:W.toLocaleLowerCase())===((g=t.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const A=(C=(b=f==null?void 0:f.filter)===null||b===void 0?void 0:b.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return A==="*"||A===((I=t==null?void 0:t.event)===null||I===void 0?void 0:I.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof p=="object"&&"ids"in p){const v=p.data,{schema:y,table:g,commit_timestamp:b,type:C,errors:I}=v;p=Object.assign(Object.assign({},{schema:y,table:g,commit_timestamp:b,eventType:C,new:{},old:{},errors:I}),this._getPayloadRecords(v))}f.callback(p,n)})}_isClosed(){return this.state===N.closed}_isJoined(){return this.state===N.joined}_isJoining(){return this.state===N.joining}_isLeaving(){return this.state===N.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const i=e.toLocaleLowerCase(),s={type:i,filter:t,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&ht.isEqual(i.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(J.close,{},e)}_onError(e){this._on(J.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=N.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Ct(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Ct(e.columns,e.old_record)),t}}var ss=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};const os=()=>{};class as{constructor(e,t){var n;this.accessToken=null,this.channels=[],this.endPoint="",this.headers=Xi,this.params={},this.timeout=Zt,this.transport=Zi.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=os,this.conn=null,this.sendBuffer=[],this.serializer=new Ki,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint=`${e}/${Qe.websocket}`,t!=null&&t.params&&(this.params=t.params),t!=null&&t.headers&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),t!=null&&t.timeout&&(this.timeout=t.timeout),t!=null&&t.logger&&(this.logger=t.logger),t!=null&&t.transport&&(this.transport=t.transport),t!=null&&t.heartbeatIntervalMs&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const i=(n=t==null?void 0:t.params)===null||n===void 0?void 0:n.eventsPerSecond;i&&(this.eventsPerSecondLimitMs=Math.floor(1e3/i)),this.reconnectAfterMs=t!=null&&t.reconnectAfterMs?t.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=t!=null&&t.encode?t.encode:(s,o)=>o(JSON.stringify(s)),this.decode=t!=null&&t.decode?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new zt(()=>ss(this,void 0,void 0,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs)}connect(){this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e)))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,t!=null?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(e){return e.unsubscribe().then(t=>(this.channels.length===0&&this.disconnect(),t))}removeAllChannels(){return Promise.all(this.channels.map(e=>e.unsubscribe())).then(e=>(this.disconnect(),e))}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case _e.connecting:return se.Connecting;case _e.open:return se.Open;case _e.closing:return se.Closing;default:return se.Closed}}isConnected(){return this.connectionState()===se.Open}channel(e,t={config:{}}){this.isConnected()||this.connect();const n=new ht(`realtime:${e}`,t,this);return this.channels.push(n),n}push(e){const{topic:t,event:n,payload:i,ref:s}=e;let o=()=>{this.encode(e,a=>{var u;(u=this.conn)===null||u===void 0||u.send(a)})};if(this.log("push",`${t} ${n} (${s})`,i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(o)())return"rate limited"}else o();else this.sendBuffer.push(o)}setAuth(e){this.accessToken=e,this.channels.forEach(t=>{e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(J.access_token,{access_token:e})})}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t._joinRef()!==e._joinRef())}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Yi}))}_onConnMessage(e){this.decode(e.data,t=>{let{topic:n,event:i,payload:s,ref:o}=t;(o&&o===this.pendingHeartbeatRef||i===(s==null?void 0:s.type))&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(t))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(J.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",i=new URLSearchParams(t);return`${e}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_sendHeartbeat(){var e;if(!!this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(e=this.conn)===null||e===void 0||e.close(qi,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}_throttle(e,t=this.eventsPerSecondLimitMs){return()=>this.inThrottle?!0:(e(),this.inThrottle=!0,setTimeout(()=>{this.inThrottle=!1},t),!1)}}class Yt extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function D(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class cs extends Yt{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ls extends Yt{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var qt=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};const Kt=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>qt(void 0,void 0,void 0,function*(){return yield(yield Ce(()=>Promise.resolve().then(()=>Le),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},us=()=>qt(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ce(()=>Promise.resolve().then(()=>Le),void 0)).Response:Response});var me=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};const $t=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),hs=(r,e)=>me(void 0,void 0,void 0,function*(){const t=yield us();r instanceof t?r.json().then(n=>{e(new cs($t(n),r.status||500))}):e(new ls($t(r),r))}),ds=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};function Pe(r,e,t,n,i,s){return me(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,ds(e,n,i,s)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>hs(u,a))})})}function tt(r,e,t,n){return me(this,void 0,void 0,function*(){return Pe(r,"GET",e,t,n)})}function oe(r,e,t,n,i){return me(this,void 0,void 0,function*(){return Pe(r,"POST",e,n,i,t)})}function fs(r,e,t,n,i){return me(this,void 0,void 0,function*(){return Pe(r,"PUT",e,n,i,t)})}function Qt(r,e,t,n,i){return me(this,void 0,void 0,function*(){return Pe(r,"DELETE",e,n,i,t)})}var z=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};const vs={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ps={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ms{constructor(e,t={},n,i){this.url=e,this.headers=t,this.bucketId=n,this.fetch=Kt(i)}uploadOrUpdate(e,t,n,i){return z(this,void 0,void 0,function*(){try{let s;const o=Object.assign(Object.assign({},ps),i),a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",n)):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl)):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType);const u=this._removeEmptyFolders(t),l=this._getFinalPath(u),c=yield this.fetch(`${this.url}/object/${l}`,{method:e,body:s,headers:a});return c.ok?{data:{path:u},error:null}:{data:null,error:yield c.json()}}catch(s){if(D(s))return{data:null,error:s};throw s}})}upload(e,t,n){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}update(e,t,n){return z(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t){return z(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers}),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}copy(e,t){return z(this,void 0,void 0,function*(){try{return{data:{path:(yield oe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t},{headers:this.headers})).Key},error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,n){return z(this,void 0,void 0,function*(){try{const i=this._getFinalPath(e);let s=yield oe(this.fetch,`${this.url}/object/sign/${i}`,{expiresIn:t},{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(D(i))return{data:null,error:i};throw i}})}createSignedUrls(e,t,n){return z(this,void 0,void 0,function*(){try{const i=yield oe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(D(i))return{data:null,error:i};throw i}})}download(e){return z(this,void 0,void 0,function*(){try{const t=this._getFinalPath(e);return{data:yield(yield tt(this.fetch,`${this.url}/object/${t}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}getPublicUrl(e,t){const n=this._getFinalPath(e),i=t!=null&&t.download?`?download=${t.download===!0?"":t.download}`:"";return{data:{publicUrl:encodeURI(`${this.url}/object/public/${n}${i}`)}}}remove(e){return z(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}list(e,t,n){return z(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},vs),t),{prefix:e||""});return{data:yield oe(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(D(i))return{data:null,error:i};throw i}})}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}}const gs="2.0.0",ys={"X-Client-Info":`storage-js/${gs}`};var de=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};class bs{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},ys),t),this.fetch=Kt(n)}listBuckets(){return de(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(D(e))return{data:null,error:e};throw e}})}getBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield tt(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return de(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return de(this,void 0,void 0,function*(){try{return{data:yield fs(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public},{headers:this.headers}),error:null}}catch(n){if(D(n))return{data:null,error:n};throw n}})}emptyBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield oe(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}deleteBucket(e){return de(this,void 0,void 0,function*(){try{return{data:yield Qt(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(D(t))return{data:null,error:t};throw t}})}}class _s extends bs{constructor(e,t={},n){super(e,t,n)}from(e){return new ms(this.url,this.headers,e,this.fetch)}}const ws="2.1.1",ks={"X-Client-Info":`supabase-js/${ws}`};var Ss=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};const xs=r=>{let e;return r?e=r:typeof fetch>"u"?e=ut:e=fetch,(...t)=>e(...t)},Ts=()=>typeof Headers>"u"?ke.exports.Headers:Headers,Es=(r,e,t)=>{const n=xs(t),i=Ts();return(s,o)=>Ss(void 0,void 0,void 0,function*(){var a;const u=(a=yield e())!==null&&a!==void 0?a:r;let l=new i(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${u}`),n(s,Object.assign(Object.assign({},o),{headers:l}))})};function js(r){return r.replace(/\/$/,"")}function Rs(r,e){const{db:t,auth:n,realtime:i,global:s}=r,{db:o,auth:a,realtime:u,global:l}=e;return{db:Object.assign(Object.assign({},o),t),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},u),i),global:Object.assign(Object.assign({},l),s)}}var Ie=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};function Os(r){return Math.round(Date.now()/1e3)+r}function As(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const ce=()=>typeof window<"u";function U(r,e){var t;e||(e=((t=window==null?void 0:window.location)===null||t===void 0?void 0:t.href)||""),r=r.replace(/[\[\]]/g,"\\$&");const n=new RegExp("[?&#]"+r+"(=([^&#]*)|&|#|$)"),i=n.exec(e);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}const er=r=>{let e;return r?e=r:typeof fetch>"u"?e=(...t)=>Ie(void 0,void 0,void 0,function*(){return yield(yield Ce(()=>Promise.resolve().then(()=>Le),void 0)).fetch(...t)}):e=fetch,(...t)=>e(...t)},Cs=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Ls=(r,e,t)=>Ie(void 0,void 0,void 0,function*(){yield r.setItem(e,JSON.stringify(t))}),Dt=(r,e)=>Ie(void 0,void 0,void 0,function*(){const t=yield r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}}),Ps=(r,e)=>Ie(void 0,void 0,void 0,function*(){yield r.removeItem(e)}),Is=r=>{try{return decodeURIComponent(atob(r.replace(/[-]/g,"+").replace(/[_]/g,"/")).split("").map(e=>"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)).join(""))}catch(e){if(e instanceof ReferenceError)return Buffer.from(r,"base64").toString("utf-8");throw e}};class Fe{constructor(){this.promise=new Fe.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Fe.promiseConstructor=Promise;function Fs(r){const e=r.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");const t=e[1];return JSON.parse(Is(t))}class dt extends Error{constructor(e){super(e),this.__isAuthError=!0,this.name="AuthError"}}function R(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class $s extends dt{constructor(e,t){super(e),this.name="AuthApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}function Ds(r){return R(r)&&r.name==="AuthApiError"}class tr extends dt{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class $e extends dt{constructor(e,t,n){super(e),this.name=t,this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ye extends $e{constructor(){super("Auth session missing!","AuthSessionMissingError",400)}}class Ze extends $e{constructor(e){super(e,"AuthInvalidCredentialsError",400)}}class q extends $e{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ae extends $e{constructor(e,t){super(e,"AuthRetryableFetchError",t)}}var ft=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})},Ms=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};const je=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Vs=(r,e)=>ft(void 0,void 0,void 0,function*(){const t=[502,503,504];Cs(r)?t.includes(r.status)?e(new Ae(je(r),r.status)):r.json().then(n=>{e(new $s(je(n),r.status||500))}).catch(n=>{e(new tr(je(n),n))}):e(new Ae(je(r),0))}),Ns=(r,e,t,n)=>{const i={method:r,headers:(e==null?void 0:e.headers)||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),t))};function j(r,e,t,n){var i;return ft(this,void 0,void 0,function*(){const s=Object.assign({},n==null?void 0:n.headers);n!=null&&n.jwt&&(s.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=yield Us(r,e,t+a,{headers:s,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(u):{data:Object.assign({},u),error:null}})}function Us(r,e,t,n,i,s){return ft(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Ns(e,n,i,s)).then(u=>{if(!u.ok)throw u;return n!=null&&n.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>Vs(u,a))})})}function fe(r){var e;let t=null;Gs(r)&&(t=Object.assign({},r),t.expires_at=Os(r.expires_in));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function ae(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function Bs(r){return{data:r,error:null}}function Ws(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s}=r,o=Ms(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:i,verification_type:s},u=Object.assign({},o);return{data:{properties:a,user:u},error:null}}function Gs(r){return r.access_token&&r.refresh_token&&r.expires_in}var X=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})},Js=globalThis&&globalThis.__rest||function(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t};class Hs{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=er(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(e){return X(this,void 0,void 0,function*(){try{return yield j(this.fetch,"POST",`${this.url}/logout`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(t){if(R(t))return{data:null,error:t};throw t}})}inviteUserByEmail(e,t={}){return X(this,void 0,void 0,function*(){try{return yield j(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ae})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}})}generateLink(e){return X(this,void 0,void 0,function*(){try{const{options:t}=e,n=Js(e,["options"]),i=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),yield j(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Ws,redirectTo:t==null?void 0:t.redirectTo})}catch(t){if(R(t))return{data:{properties:null,user:null},error:t};throw t}})}createUser(e){return X(this,void 0,void 0,function*(){try{return yield j(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ae})}catch(t){if(R(t))return{data:{user:null},error:t};throw t}})}listUsers(){return X(this,void 0,void 0,function*(){try{const{data:e,error:t}=yield j(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers});if(t)throw t;return{data:Object.assign({},e),error:null}}catch(e){if(R(e))return{data:{users:[]},error:e};throw e}})}getUserById(e){return X(this,void 0,void 0,function*(){try{return yield j(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ae})}catch(t){if(R(t))return{data:{user:null},error:t};throw t}})}updateUserById(e,t){return X(this,void 0,void 0,function*(){try{return yield j(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ae})}catch(n){if(R(n))return{data:{user:null},error:n};throw n}})}deleteUser(e){return X(this,void 0,void 0,function*(){try{return yield j(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ae})}catch(t){if(R(t))return{data:{user:null},error:t};throw t}})}_listFactors(e){return X(this,void 0,void 0,function*(){try{return{data:yield j(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers}),error:null}}catch(t){if(R(t))return{data:null,error:t};throw t}})}_deleteFactor(e){return X(this,void 0,void 0,function*(){try{return{data:yield j(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(R(t))return{data:null,error:t};throw t}})}}const Zs="2.3.1",zs="http://localhost:9999",Xs="supabase.auth.token",Ys={"X-Client-Info":`gotrue-js/${Zs}`},ze=10,Re={MAX_RETRIES:10,RETRY_INTERVAL:2},qs={getItem:r=>ce()?globalThis.localStorage.getItem(r):null,setItem:(r,e)=>{!ce()||globalThis.localStorage.setItem(r,e)},removeItem:r=>{!ce()||globalThis.localStorage.removeItem(r)}};function Ks(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var x=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};Ks();const Qs={url:zs,storageKey:Xs,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ys};class eo{constructor(e){this.stateChangeEmitters=new Map,this.networkRetries=0,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0;const t=Object.assign(Object.assign({},Qs),e);this.inMemorySession=null,this.storageKey=t.storageKey,this.autoRefreshToken=t.autoRefreshToken,this.persistSession=t.persistSession,this.storage=t.storage||qs,this.admin=new Hs({url:t.url,headers:t.headers,fetch:t.fetch}),this.url=t.url,this.headers=t.headers,this.fetch=er(t.fetch),this.detectSessionInUrl=t.detectSessionInUrl,this.initialize(),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)}}initialize(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}_initialize(){return x(this,void 0,void 0,function*(){if(this.initializePromise)return this.initializePromise;try{if(this.detectSessionInUrl&&this._isImplicitGrantFlow()){const{data:e,error:t}=yield this._getSessionFromUrl();if(t)return yield this._removeSession(),{error:t};const{session:n,redirectType:i}=e;return yield this._saveSession(n),this._notifyAllSubscribers("SIGNED_IN",n),i==="recovery"&&this._notifyAllSubscribers("PASSWORD_RECOVERY",n),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return R(e)?{error:e}:{error:new tr("Unexpected error during initialization",e)}}finally{this._handleVisibilityChange()}})}signUp(e){var t,n;return x(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:l,password:c,options:h}=e;i=yield j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:l,password:c,data:(t=h==null?void 0:h.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:fe})}else if("phone"in e){const{phone:l,password:c,options:h}=e;i=yield j(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:l,password:c,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:fe})}else throw new Ze("You must provide either an email or phone number and a password");const{data:s,error:o}=i;if(o||!s)return{data:{user:null,session:null},error:o};const a=s.session,u=s.user;return s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:u,session:a},error:null}}catch(i){if(R(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithPassword(e){var t,n;return x(this,void 0,void 0,function*(){try{yield this._removeSession();let i;if("email"in e){const{email:a,password:u,options:l}=e;i=yield j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,data:(t=l==null?void 0:l.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fe})}else if("phone"in e){const{phone:a,password:u,options:l}=e;i=yield j(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,data:(n=l==null?void 0:l.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:fe})}else throw new Ze("You must provide either an email or phone number and a password");const{data:s,error:o}=i;return o||!s?{data:{user:null,session:null},error:o}:(s.session&&(yield this._saveSession(s.session),this._notifyAllSubscribers("SIGNED_IN",s.session)),{data:s,error:o})}catch(i){if(R(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithOAuth(e){var t,n,i;return x(this,void 0,void 0,function*(){return yield this._removeSession(),this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=e.options)===null||i===void 0?void 0:i.queryParams})})}signInWithOtp(e){var t,n,i,s;return x(this,void 0,void 0,function*(){try{if(yield this._removeSession(),"email"in e){const{email:o,options:a}=e,{error:u}=yield j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:o,data:(t=a==null?void 0:a.data)!==null&&t!==void 0?t:{},create_user:(n=a==null?void 0:a.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}if("phone"in e){const{phone:o,options:a}=e,{error:u}=yield j(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:o,data:(i=a==null?void 0:a.data)!==null&&i!==void 0?i:{},create_user:(s=a==null?void 0:a.shouldCreateUser)!==null&&s!==void 0?s:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null},error:u}}throw new Ze("You must provide either an email or phone number.")}catch(o){if(R(o))return{data:{user:null,session:null},error:o};throw o}})}verifyOtp(e){var t,n;return x(this,void 0,void 0,function*(){try{yield this._removeSession();const{data:i,error:s}=yield j(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:(t=e.options)===null||t===void 0?void 0:t.captchaToken}}),redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,xform:fe});if(s)throw s;if(!i)throw"An error occurred on token verification.";const o=i.session,a=i.user;return o!=null&&o.access_token&&(yield this._saveSession(o),this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:a,session:o},error:null}}catch(i){if(R(i))return{data:{user:null,session:null},error:i};throw i}})}signInWithSSO(e){var t,n,i;return x(this,void 0,void 0,function*(){try{return yield this._removeSession(),yield j(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=e==null?void 0:e.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:Bs})}catch(s){if(R(s))return{data:null,error:s};throw s}})}getSession(){return x(this,void 0,void 0,function*(){yield this.initializePromise;let e=null;if(this.persistSession){const s=yield Dt(this.storage,this.storageKey);s!==null&&(this._isValidSession(s)?e=s:yield this._removeSession())}else e=this.inMemorySession;if(!e)return{data:{session:null},error:null};if(!(e.expires_at?e.expires_at<=Date.now()/1e3:!1))return{data:{session:e},error:null};const{session:n,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:n},error:null}})}getUser(e){var t,n;return x(this,void 0,void 0,function*(){try{if(!e){const{data:i,error:s}=yield this.getSession();if(s)throw s;e=(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:void 0}return yield j(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ae})}catch(i){if(R(i))return{data:{user:null},error:i};throw i}})}updateUser(e){return x(this,void 0,void 0,function*(){try{const{data:t,error:n}=yield this.getSession();if(n)throw n;if(!t.session)throw new ye;const i=t.session,{data:s,error:o}=yield j(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,body:e,jwt:i.access_token,xform:ae});if(o)throw o;return i.user=s.user,yield this._saveSession(i),this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}}catch(t){if(R(t))return{data:{user:null},error:t};throw t}})}_decodeJWT(e){return Fs(e)}setSession(e){return x(this,void 0,void 0,function*(){try{const t=Date.now()/1e3;let n=t,i=!0,s=null;if(e.access_token&&e.access_token.split(".")[1]){const o=this._decodeJWT(e.access_token);o.exp&&(n=o.exp,i=n<=t)}if(i){if(!e.refresh_token)throw new ye;const{data:o,error:a}=yield this._refreshAccessToken(e.refresh_token);if(a)return{data:{session:null,user:null},error:a};if(!o.session)return{data:{session:null,user:null},error:null};s=o.session}else{const{data:o,error:a}=yield this.getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:o.user,token_type:"bearer",expires_in:n-t,expires_at:n}}return yield this._saveSession(s),this._notifyAllSubscribers("TOKEN_REFRESHED",s),{data:{session:s,user:s.user},error:null}}catch(t){if(R(t))return{data:{session:null,user:null},error:t};throw t}})}refreshSession(e){var t;return x(this,void 0,void 0,function*(){try{if(!e){const{data:s,error:o}=yield this.getSession();if(o)throw o;e=(t=s.session)!==null&&t!==void 0?t:void 0}if(!(e!=null&&e.refresh_token))throw new ye;const{session:n,error:i}=yield this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:n?{data:{user:n.user,session:n},error:null}:{data:{user:null,session:null},error:null}}catch(n){if(R(n))return{data:{user:null,session:null},error:n};throw n}})}_getSessionFromUrl(){return x(this,void 0,void 0,function*(){try{if(!ce())throw new q("No browser detected.");if(!this._isImplicitGrantFlow())throw new q("Not a valid implicit grant flow url.");const e=U("error_description");if(e){const y=U("error_code");if(!y)throw new q("No error_code detected.");const g=U("error");throw g?new q(e,{error:g,code:y}):new q("No error detected.")}const t=U("provider_token"),n=U("provider_refresh_token"),i=U("access_token");if(!i)throw new q("No access_token detected.");const s=U("expires_in");if(!s)throw new q("No expires_in detected.");const o=U("refresh_token");if(!o)throw new q("No refresh_token detected.");const a=U("token_type");if(!a)throw new q("No token_type detected.");const l=Math.round(Date.now()/1e3)+parseInt(s),{data:c,error:h}=yield this.getUser(i);if(h)throw h;const p=c.user,f={provider_token:t,provider_refresh_token:n,access_token:i,expires_in:parseInt(s),expires_at:l,refresh_token:o,token_type:a,user:p},v=U("type");return window.location.hash="",{data:{session:f,redirectType:v},error:null}}catch(e){if(R(e))return{data:{session:null,redirectType:null},error:e};throw e}})}_isImplicitGrantFlow(){return ce()&&(Boolean(U("access_token"))||Boolean(U("error_description")))}signOut(){var e;return x(this,void 0,void 0,function*(){const{data:t,error:n}=yield this.getSession();if(n)return{error:n};const i=(e=t.session)===null||e===void 0?void 0:e.access_token;if(i){const{error:s}=yield this.admin.signOut(i);if(s&&!(Ds(s)&&(s.status===404||s.status===401)))return{error:s}}return yield this._removeSession(),this._notifyAllSubscribers("SIGNED_OUT",null),{error:null}})}onAuthStateChange(e){const t=As(),n={id:t,callback:e,unsubscribe:()=>{this.stateChangeEmitters.delete(t)}};return this.stateChangeEmitters.set(t,n),{data:{subscription:n}}}resetPasswordForEmail(e,t={}){return x(this,void 0,void 0,function*(){try{return yield j(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(n){if(R(n))return{data:null,error:n};throw n}})}_refreshAccessToken(e){return x(this,void 0,void 0,function*(){try{return yield j(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fe})}catch(t){if(R(t))return{data:{session:null,user:null},error:t};throw t}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t={}){const n=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return ce()&&(window.location.href=n),{data:{provider:e,url:n},error:null}}_recoverAndRefresh(){var e;return x(this,void 0,void 0,function*(){try{const t=yield Dt(this.storage,this.storageKey);if(!this._isValidSession(t)){t!==null&&(yield this._removeSession());return}const n=Math.round(Date.now()/1e3);if(((e=t.expires_at)!==null&&e!==void 0?e:1/0)<n+ze)if(this.autoRefreshToken&&t.refresh_token){this.networkRetries++;const{error:i}=yield this._callRefreshToken(t.refresh_token);if(i){if(console.log(i.message),i instanceof Ae&&this.networkRetries<Re.MAX_RETRIES){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),this.refreshTokenTimer=setTimeout(()=>this._recoverAndRefresh(),Math.pow(Re.RETRY_INTERVAL,this.networkRetries)*100);return}yield this._removeSession()}this.networkRetries=0}else yield this._removeSession();else this.persistSession&&(yield this._saveSession(t)),this._notifyAllSubscribers("SIGNED_IN",t)}catch(t){console.error(t);return}})}_callRefreshToken(e){var t,n;return x(this,void 0,void 0,function*(){if(this.refreshingDeferred)return this.refreshingDeferred.promise;try{if(this.refreshingDeferred=new Fe,!e)throw new ye;const{data:i,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!i.session)throw new ye;yield this._saveSession(i.session),this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const o={session:i.session,error:null};return this.refreshingDeferred.resolve(o),o}catch(i){if(R(i)){const s={session:null,error:i};return(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null}})}_notifyAllSubscribers(e,t){this.stateChangeEmitters.forEach(n=>n.callback(e,t))}_saveSession(e){return x(this,void 0,void 0,function*(){this.persistSession||(this.inMemorySession=e);const t=e.expires_at;if(t){const n=Math.round(Date.now()/1e3),i=t-n,s=i>ze?ze:.5;this._startAutoRefreshToken((i-s)*1e3)}this.persistSession&&e.expires_at&&(yield this._persistSession(e))})}_persistSession(e){return Ls(this.storage,this.storageKey,e)}_removeSession(){return x(this,void 0,void 0,function*(){this.persistSession?yield Ps(this.storage,this.storageKey):this.inMemorySession=null,this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer)})}_startAutoRefreshToken(e){this.refreshTokenTimer&&clearTimeout(this.refreshTokenTimer),!(e<=0||!this.autoRefreshToken)&&(this.refreshTokenTimer=setTimeout(()=>x(this,void 0,void 0,function*(){this.networkRetries++;const{data:{session:t},error:n}=yield this.getSession();if(!n&&t){const{error:i}=yield this._callRefreshToken(t.refresh_token);i||(this.networkRetries=0),i instanceof Ae&&this.networkRetries<Re.MAX_RETRIES&&this._startAutoRefreshToken(Math.pow(Re.RETRY_INTERVAL,this.networkRetries)*100)}}),e),typeof this.refreshTokenTimer.unref=="function"&&this.refreshTokenTimer.unref())}_handleVisibilityChange(){if(!ce()||!(window!=null&&window.addEventListener))return!1;try{window==null||window.addEventListener("visibilitychange",()=>x(this,void 0,void 0,function*(){document.visibilityState==="visible"&&(yield this.initializePromise,yield this._recoverAndRefresh())}))}catch(e){console.error("_handleVisibilityChange",e)}}_getUrlForProvider(e,t){const n=[`provider=${encodeURIComponent(e)}`];if(t!=null&&t.redirectTo&&n.push(`redirect_to=${encodeURIComponent(t.redirectTo)}`),t!=null&&t.scopes&&n.push(`scopes=${encodeURIComponent(t.scopes)}`),t!=null&&t.queryParams){const i=new URLSearchParams(t.queryParams);n.push(i.toString())}return`${this.url}/authorize?${n.join("&")}`}_unenroll(e){var t;return x(this,void 0,void 0,function*(){const{data:n,error:i}=yield this.getSession();return i?{data:null,error:i}:yield j(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})})}_enroll(e){var t,n;return x(this,void 0,void 0,function*(){const{data:i,error:s}=yield this.getSession();if(s)return{data:null,error:s};const{data:o,error:a}=yield j(this.fetch,"POST",`${this.url}/factors`,{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:(t=i==null?void 0:i.session)===null||t===void 0?void 0:t.access_token});return a?{data:null,error:a}:(!((n=o==null?void 0:o.totp)===null||n===void 0)&&n.qr_code&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}_verify(e){var t;return x(this,void 0,void 0,function*(){const{data:n,error:i}=yield this.getSession();if(i)return{data:null,error:i};const{data:s,error:o}=yield j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token});return o?{data:null,error:o}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+s.expires_in},s)),this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",s),{data:s,error:o})})}_challenge(e){var t;return x(this,void 0,void 0,function*(){const{data:n,error:i}=yield this.getSession();return i?{data:null,error:i}:yield j(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{headers:this.headers,jwt:(t=n==null?void 0:n.session)===null||t===void 0?void 0:t.access_token})})}_challengeAndVerify(e){return x(this,void 0,void 0,function*(){const{data:t,error:n}=yield this._challenge({factorId:e.factorId});return n?{data:null,error:n}:yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return x(this,void 0,void 0,function*(){const{data:{user:e},error:t}=yield this.getUser();if(t)return{data:null,error:t};const n=(e==null?void 0:e.factors)||[],i=n.filter(s=>s.factor_type==="totp"&&s.status==="verified");return{data:{all:n,totp:i},error:null}})}_getAuthenticatorAssuranceLevel(){var e,t;return x(this,void 0,void 0,function*(){const{data:{session:n},error:i}=yield this.getSession();if(i)return{data:null,error:i};if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const s=this._decodeJWT(n.access_token);let o=null;s.aal&&(o=s.aal);let a=o;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(c=>c.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const l=s.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:l},error:null}})}}class to extends eo{constructor(e){super(e)}}var ro=globalThis&&globalThis.__awaiter||function(r,e,t,n){function i(s){return s instanceof t?s:new t(function(o){o(s)})}return new(t||(t=Promise))(function(s,o){function a(c){try{l(n.next(c))}catch(h){o(h)}}function u(c){try{l(n.throw(c))}catch(h){o(h)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((n=n.apply(r,e||[])).next())})};const no={headers:ks},io={schema:"public"},so={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},oo={};class ao{constructor(e,t,n){var i,s,o,a,u,l,c,h;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const p=js(e);if(this.realtimeUrl=`${p}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${p}/auth/v1`,this.storageUrl=`${p}/storage/v1`,p.match(/(supabase\.co)|(supabase\.in)/)){const b=p.split(".");this.functionsUrl=`${b[0]}.functions.${b[1]}.${b[2]}`}else this.functionsUrl=`${p}/functions/v1`;const v=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,y={db:io,realtime:oo,auth:Object.assign(Object.assign({},so),{storageKey:v}),global:no},g=Rs(n!=null?n:{},y);this.storageKey=(s=(i=g.auth)===null||i===void 0?void 0:i.storageKey)!==null&&s!==void 0?s:"",this.headers=(a=(o=g.global)===null||o===void 0?void 0:o.headers)!==null&&a!==void 0?a:{},this.auth=this._initSupabaseAuthClient((u=g.auth)!==null&&u!==void 0?u:{},this.headers,(l=g.global)===null||l===void 0?void 0:l.fetch),this.fetch=Es(t,this._getAccessToken.bind(this),(c=g.global)===null||c===void 0?void 0:c.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},g.realtime)),this.rest=new Ti(`${p}/rest/v1`,{headers:this.headers,schema:(h=g.db)===null||h===void 0?void 0:h.schema,fetch:this.fetch}),this._listenForAuthEvents()}get functions(){return new mi(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _s(this.storageUrl,this.headers,this.fetch)}from(e){return this.rest.from(e)}rpc(e,t={},n){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return ro(this,void 0,void 0,function*(){const{data:n}=yield this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,storageKey:s},o,a){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new to({url:this.authUrl,headers:Object.assign(Object.assign({},u),o),storageKey:s,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:i,fetch:a})}_initRealtimeClient(e){return new as(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,n==null?void 0:n.access_token,"CLIENT")})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==t?(this.realtime.setAuth(t!=null?t:null),this.changedAccessToken=t):(e==="SIGNED_OUT"||e==="USER_DELETED")&&(this.realtime.setAuth(this.supabaseKey),n=="STORAGE"&&this.auth.signOut())}}const co=(r,e,t)=>new ao(r,e,t);const re=r=>(rt("data-v-e9d0d62a"),r=r(),nt(),r),lo={class:"container"},uo=re(()=>k("h1",{class:"title"},"Hello.",-1)),ho=re(()=>k("h3",{class:"divider subtitle"},[k("ruby",null,[K(" \u543E\u59D3\u9676\u540D\u5EB7\uFF0C\u81EA\u865F\u6E05\u79CB\u3002 "),k("rt",null,"My name is Allen Tao, aka Qingqiu.")])],-1)),fo=re(()=>k("p",{class:"paragraph"},[k("ruby",null,[K(" \u4E00\u540D\u65B0\u751F\u4EE3\u8FB2\u6C11\u5DE5 "),k("rt",null," A plain software developer ")])],-1)),vo={class:"paragraph"},po=re(()=>k("rt",null," Love taking photos when sunny ",-1)),mo={class:"paragraph"},go=re(()=>k("rt",null," Keen on developing some individual projects ",-1)),yo=re(()=>k("p",{class:"paragraph"},[k("ruby",null,[K(" \u5076\u723E\u5BEB\u4E00\u4E9B"),k("a",{href:"https://n-notes.tkzt.cn",class:"underline",target:"_blank"},"\u535A\u5BA2"),k("rt",null," Have a blog site ")])],-1)),bo=re(()=>k("p",{class:"divider filled"},null,-1)),_o={class:"emoji-reaction"},wo=re(()=>k("p",{class:"divider filled"},null,-1)),ko=fr('<span class="divider-vertical" data-v-e9d0d62a>-</span><a href="mailto:taoqingqiu@gmail.com" class="icon-link" data-v-e9d0d62a><i class="fa-regular fa-envelope icon" data-v-e9d0d62a></i></a><a href="https://github.com/boring-plans" class="icon-link" data-v-e9d0d62a><i class="fab fa-github icon" data-v-e9d0d62a></i></a>',3),So={__name:"HomepageView",setup(r){const n=co("https://kjslqwyilnpzselvwdib.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imtqc2xxd3lpbG5wenNlbHZ3ZGliIiwicm9sZSI6ImFub24iLCJpYXQiOjE2NjkxODI0MjMsImV4cCI6MTk4NDc1ODQyM30.ePHLfYPvu4E5Ts_CVJo3wUXTnc6L0tEMuzQ-SX0bDDo"),i=be(""),s=li.load();(async()=>{const c=await(await s).get();i.value=c.visitorId})();async function o(l){await n.from("home-reactions").insert([{reactor:i.value,reaction:l}])}async function a(l){await n.from("home-reactions").delete().eq("reactor",i.value).eq("reaction",l)}async function u(){const{data:l}=await n.from("home-reactions").select("reactor, reaction");return l==null?void 0:l.reduce((c,h)=>{const p=c.findIndex(f=>f.reaction===h.reaction);return p>-1?c[p].reactors.includes(h.reactor)||c[p].reactors.push(h.reactor):c.push({reaction:h.reaction,reactors:[h.reactor]}),c},[])}return(l,c)=>{const h=hr("router-link");return $(),V("main",null,[k("div",lo,[uo,ho,fo,k("p",vo,[k("ruby",null,[K(" \u4E00\u500B"),Ue(h,{to:"/fine-weather-gallery",class:"underline"},{default:gt(()=>[K("\u597D\u5929\u6C23\u651D\u5F71")]),_:1}),K("\u611B\u597D\u8005 "),po])]),k("p",mo,[k("ruby",null,[K(" \u6703\u4E00\u4E9B\u82B1\u62F3\u7D89\u817F\uFF0C\u6709\u5E7E\u500B"),Ue(h,{to:"/boring-plans",class:"underline"},{default:gt(()=>[K("\u62D9\u52A3\u4F5C\u54C1")]),_:1}),go])]),yo,bo,k("div",_o,[Ue(dr(Xe),{"react-to":"tkzt.cn",reactor:i.value,react:o,unreact:a,getReactions:u},null,8,["reactor"])]),wo,k("footer",null,[K(" \xA9\xA0 "),k("small",null,"2022"+ne(new Date().getFullYear()===2022?"":" - Present")+"\xA0Allen Tao",1),ko])])])}}},To=ur(So,[["__scopeId","data-v-e9d0d62a"]]);export{To as default};
