---
title: "Adskipper: å¹¿å‘Šé€€æ•£"
date: 2025-06-06
---

æœ€è¿‘ï¼ˆç”±äºæ‡’æƒ°ï¼Œæœ€ç»ˆå†™å®Œè¿™ç¯‡åšå®¢å·²ç»æ˜¯ 23 å·äº†ï¼Œå¯èƒ½åªèƒ½ç®—â€œè¾ƒè¿‘â€ï¼‰WFH çš„æ¬¡æ•°è¶Šæ¥è¶Šå¤šï¼Œé«˜æ•ˆå·¥ä½œ :dog: ä¹‹ä½™åœ¨æŸä¸ªé£˜ç€å¹¿å‘Šã€å¹¿ä¸ºæµä¼ çš„è§†é¢‘ç½‘ç«™æŠŠ[ã€Šé»„çŸ³ã€‹](https://movie.douban.com/subject/27036727/)ä¸‰åˆ°äº”å­£ç»™åˆ·äº†ã€‚æ€»çš„æ¥è¯´ï¼Œè¿™æ˜¯ä¸ªå…³äºç‰›ä»”ã€å®¶æ—ï¼ˆç±»æ•™çˆ¶ï¼‰ã€è¥¿éƒ¨å¤§å¼€å‘ï¼ˆé‡å¿ƒåœ¨å…³äºå¼€å‘ä¸å¦çš„å¯¹æŠ—ä¸Šï¼‰çš„ç³»åˆ—å‰§é›†ï¼Œå±äºå‰§è’æ—¶å¾ˆå®¹æ˜“å‘ç°çš„é«˜åˆ†ç¾å‰§ã€‚ä¹Ÿè®¸æ˜¯ä¸ºäº†è´¨æ„Ÿä¸å™è¿°æ·±åº¦ä¹‹ç±»çš„ï¼Œæ•´ä½“èŠ‚å¥åæ…¢ï¼Œæ­¤å‰è‹¥å¹²æ¬¡æƒ³æŠŠå®ƒåˆ·æ‰éƒ½æ²¡èƒ½æˆåŠŸã€‚è¿™æ¬¡è€ç€æ€§å­çœ‹äº†ä¸‹å»ï¼Œéšç€äººç‰©èƒŒåæ•…äº‹çš„æ­å¼€ã€å½“å‰æ—¶é—´çº¿ä¸Šçš„å¯¹æŠ—å‡çº§ï¼Œå¾ˆå¿«ä¾¿ä½“ä¼šåˆ°å…¶é«˜åˆ†é­…åŠ›ã€‚ç„¶è€Œç¬¬äº”å­£è€è¾¾é¡¿åˆšè¯´å®Œè¦æ•™ç§˜ä¹¦ç©å…³äºå¨èƒçš„æ¸¸æˆï¼Œä¸‹ä¸€é›†å°±ç›´æ¥è¢«å¹²æ‰äº†ã€‚ç”±äºå°¸ä½“å¹¶æ²¡éœ²è„¸ï¼Œè¿˜ä»¥ä¸ºä¼šåƒå‰å‡ å­£é‚£æ ·ï¼Œä¸€æ®µæŒ¯å¥‹äººå¿ƒçš„éŸ³ä¹ä¹‹åäº‹æƒ…è¿æ¥åè½¬ï¼Œç»“æœç‰¹ä¹ˆç›´æ¥è‘¬ç¤¼ï¼Œç›´æ¥é€å†œåœºç»™åŸä½æ°‘ï¼ˆå‰å‡ å­£å°±æ˜¯å’ŒåŸä½æ°‘çš„å¯¹æŠ—ï¼‰ï¼Œç›´æ¥å‰§ç»ˆã€‚æœ‰ç‚¹æ— è¯­ï¼Œæœäº†ä¸‹ï¼ŒåŸæ¥æ˜¯[å‡¯æ–‡Â·ç§‘æ–¯ç‰¹çº³å’Œå‰§ç»„é—¹æ°äº†](https://news.qq.com/rain/a/20241115A09MHG00)ã€‚

æ‰¯è¿œäº†ã€‚è¯¥è§†é¢‘ç½‘ç«™æ”¶é›†æ¥çš„è§†é¢‘èµ„æºï¼Œä¸€é›†è§†é¢‘è¢«åµŒå…¥äº†ä¸¤æ®µå…³äºåœ¨çº¿åšå½©çš„å¹¿å‘Šã€‚çœ‹åˆ°ç¬¬å››å­£çš„æ—¶å€™ï¼Œæ¯æ®µå¹¿å‘Šçš„é•¿åº¦è¾¾åˆ°äº† 25 ç§’ï¼Œåšç¤¼èŸ¹ï¼äºæ˜¯è¿…é€Ÿè‚äº†æµè§ˆå™¨æ’ä»¶ï¼Œé€šè¿‡å…ˆæ ‡è®°å¹¿å‘Šå¸§ï¼ˆåŒæ—¶æ ‡è®°æŒç»­æ—¶é•¿ï¼‰ï¼Œæ’­æ”¾å†é‡åˆ°ç›¸ä¼¼åº¦å¾ˆé«˜çš„ç”»é¢æ—¶ç›´æ¥è·³è¿‡ã€‚

å…¶ä¸­ï¼Œç›¸ä¼¼åº¦è®¡ç®—çš„å®ç°å¤§æ¦‚åƒè¿™æ ·ï¼š

```js
function generateHash(grayPixels, avg) {
  let hash = 0n;
  grayPixels.forEach((val, i) => {
    if (val > avg) {
      hash |= 1n << BigInt(63 - i);
    }
  });
  return hash;
}

function hammingDistance(hash1, hash2) {
  const diff = hash1 ^ hash2;
  return diff.toString(2).replace(/0/g, '').length;
}

function calcSimilarity(image1, image2) {
  const distance = hammingDistance(
    generateHash(image1, image1.reduce((a, b) => a + b) / image1.length),
    generateHash(image2, image2.reduce((a, b) => a + b) / image2.length)
  )
  return 1 - (distance / 64);
}
```

æ˜¯åœ¨æˆ‘èµ·äº†ä¸ª `calcSimilarity` å‡½æ•°åç§°ä¹‹å `GitHub Copilot` è€å“¥ç»™è¡¥å…¨çš„ï¼Œè‡³äºè¿™å‡ ä¸ªå‡½æ•°å¹²äº†ä»€ä¹ˆä»¥åŠä¸ºå•¥å°±èƒ½è®¡ç®—ç›¸ä¼¼åº¦ï¼Œæˆ‘æ•°å­¦ä¸å¥½ï¼ˆ15 å¹´æ±Ÿè‹å·åªè€ƒäº† 116ï¼‰ï¼Œå®Œå…¨ä¸çŸ¥é“ğŸ¤¯ã€‚

è§†é¢‘å¸§çš„æˆªå–ï¼Œç»¼åˆè€ƒé‡æœ€åé‡‡ç”¨çš„ `canvas` çš„ `drawImage`ï¼š

```js
function captureVideoFrame(frameSize) {
  const video = getVideoElement();
  if (!video) {
    console.error("No video element found to capture frame");
    return null;
  }
  const canvas = document.createElement('canvas');
  canvas.width = frameSize;
  canvas.height = frameSize;
  const context = canvas.getContext('2d');
  if (!context) {
    console.error("Failed to get canvas context");
    return null;
  }
  context.drawImage(video, video.videoWidth - frameSize, video.videoHeight - frameSize, frameSize, frameSize, 0, 0, frameSize, frameSize);
  const base64Image = canvas.toDataURL('image/png');
  return base64Image;
}
```

å¦å¤–ï¼Œå¯¹äºå¹¿å‘Šå¸§çš„å­˜å‚¨ç”¨åˆ°äº† [IndexDB](https://developer.mozilla.org/docs/Web/API/IndexedDB_API)ï¼Œæ’ä»¶ Popup ç­‰æ ·å¼ç”¨äº† [UnoCSS](https://unocss.dev/)ã€‚

è¯¥æ’ä»¶æœ€ç»ˆä¸Šæ¶åœ¨å›½åŒºå‹å¥½çš„ [Edge æ‹“å±•å•†åº—](https://microsoftedge.microsoft.com/addons/detail/adskipper/nnobbaijadeebolilakhkmdkcmhmnnlh)ï¼Œä»“åº“åœ¨[è¿™é‡Œ](https://github.com/tkzt/adskipper)ã€‚